const t=window.mycomponent.h;import{f as e,g as s,h as i,a,b as r,i as o,c as n,j as l,k as h,l as c,d as u,m as p,n as d}from"./chunk-30ec9921.js";import"./chunk-77ecfe7f.js";class g{constructor(){this.showFilters=!1,this.filters={},this.globalFilter=!1,this.sortEnabled=!0,this.sort=[],this.rowsPerPage=10,this.paginatorPos=e.TOP,this.columnsWidth=[],this.showHeader=!0,this.showGrid=s.NONE,this.groups=[],this.expandGroups=!1,this.multiSelection=!1,this.globalFilterValue="",this.currentPage=1,this.currentRowsPerPage=10,this.selectedRows=[],this.groupState={},this.openedMenu=null,this.density="medium",this.renderedRows=[]}rowsPerPageHandler(t){this.currentRowsPerPage=t}expandGroupsHandler(){this.groupState={},this.forceGroupExpansion()}recalculateRows(){this.initRows()}componentWillLoad(){this.rowsPerPageHandler(this.rowsPerPage),this.initRows(),this.expandGroups&&this.forceGroupExpansion()}componentDidLoad(){this.selectRow&&this.selectRow>0&&this.selectRow<=this.renderedRows.length&&(this.selectedRows=[],this.selectedRows.push(this.renderedRows[this.selectRow-1]),this.kupAutoRowSelect.emit({selectedRow:this.selectedRows[0]}))}getColumns(){return this.data&&this.data.columns?this.data.columns:[{title:"",name:"",size:0}]}getVisibleColumns(){const t=this.getColumns().filter(t=>!t.hasOwnProperty("visible")||t.visible);return this.isGrouping()?t.filter(t=>{let e=null;for(let s of this.groups)if(s.column===t.name){e=s;break}return!e||!e.hasOwnProperty("visible")||e.visible}):t}getColumnByName(t){for(let e of this.getColumns())if(e.name===t)return e;return null}getGroupByName(t){if(!this.isGrouping())return null;for(let e of this.groups)if(e.column===t)return e;return null}getRows(){return this.data&&this.data.rows?this.data.rows:[]}initRows(){const t=this.getFilteredRows(),e=this.sortRows(t);this.footer=i(e,this.totals),this.rows=this.groupRows(e),this.paginatedRows=this.paginateRows(this.rows)}getFilteredRows(){return a(this.getRows(),this.filters,this.globalFilterValue,this.getVisibleColumns().map(t=>t.name))}isGrouping(){return this.groups&&this.groups.length>0}hasRowActions(){return void 0!==this.rowActions}removeGroup(t){this.groupState={};const e=this.groups.indexOf(t);e>=0&&(this.groups.splice(e,1),this.groups=[...this.groups])}hasTotals(){return this.totals&&Object.keys(this.totals).length>0}forceGroupExpansion(){this.rows.forEach(t=>this.forceRowGroupExpansion(t))}forceRowGroupExpansion(t){if(!t.group)return;t.group.expanded=!0;let e=this.groupState[t.group.id];e?e.expanded=this.expandGroups:e={expanded:this.expandGroups},this.groupState[t.group.id]=e,t.group.children&&t.group.children.forEach(t=>this.forceRowGroupExpansion(t))}onColumnSort({ctrlKey:t},e){let s=0;for(;s<this.sort.length&&this.sort[s].column!==e;s++);if(s<this.sort.length){const e=this.sort[s],i=Object.assign({},e,{sortMode:e.sortMode===r.A?r.D:r.A});if(t){const t=[...this.sort];t[s]=i,this.sort=t}else this.sort=[i]}else{const s={column:e,sortMode:r.A};this.sort=t?[...this.sort,s]:[s]}}onFilterChange({detail:t},e){this.currentPage=1;const s=Object.assign({},this.filters);0===t.value.length?delete s[e]:s[e]=t.value,this.filters=s}onGlobalFilterChange({detail:t}){this.currentPage=1,this.globalFilterValue=t.value}handlePageChanged({detail:t}){this.currentPage=t.newPage}handleRowsPerPageChanged({detail:t}){this.currentRowsPerPage=t.newRowsPerPage}onRowClick(t,e){this.handleRowSelect(e,t.ctrlKey);const s=t.target;let i=null;if(s instanceof HTMLElement&&"TR"!==s.tagName){let t=s;for(;"TD"!==t.tagName;)t=t.parentElement;i=t.dataset.column}this.kupRowSelected.emit({selectedRows:this.selectedRows,clickedColumn:i})}onDefaultRowActionClick(t,{action:e,row:s,type:i,index:a}){t.stopPropagation(),this.kupRowActionClicked.emit({action:e,index:a,row:s,type:i})}onRowActionExpanderClick(t,e){t.stopPropagation(),this.kupRowActionClicked.emit({row:e,type:"expander"})}handleRowSelect(t,e){if(this.multiSelection)if(e&&this.selectedRows){const e=this.selectedRows.indexOf(t);e<0?this.selectedRows=[...this.selectedRows,t]:(this.selectedRows.splice(e,1),this.selectedRows=[...this.selectedRows])}else this.selectedRows=[t];else this.selectedRows=[t]}onRowCheckboxSelection({target:t},e){if(t.checked)this.selectedRows=this.selectedRows.length>0?[...this.selectedRows,e]:[e];else{const t=this.selectedRows.indexOf(e);t>=0&&(this.selectedRows.splice(t,1),this.selectedRows=[...this.selectedRows])}this.kupRowSelected.emit({selectedRows:this.selectedRows,clickedColumn:null})}onRowExpand(t){t.group.expanded=!t.group.expanded,this.groupState[t.group.id].expanded=t.group.expanded,this.groupState=Object.assign({},this.groupState)}onSelectAll({target:t}){this.selectedRows=t.checked?this.renderedRows:[],this.kupRowSelected.emit({selectedRows:this.selectedRows,clickedColumn:null})}onColumnMouseEnter(t){this.columnOverTimeout=setTimeout(()=>{this.openedMenu=t},500)}onColumnMouseLeave(t){clearTimeout(this.columnOverTimeout),this.openedMenu===t&&(this.openedMenu=null)}switchColumnGroup(t,e){if(this.openedMenu=null,this.groupState={},null!==t){const e=this.groups.indexOf(t);this.groups.splice(e,1),this.groups=[...this.groups]}else this.groups=[...this.groups,{column:e,visible:!0}]}onOptionClicked(t,e){this.kupOptionClicked.emit({column:t,row:e})}groupRows(t){if(!this.isGrouping())return t;const e=o(t,this.groups,this.totals);return this.adjustGroupState(e),e}adjustGroupState(t){t&&0!==t.length&&t[0].hasOwnProperty("group")&&t.forEach(t=>this.adjustGroupStateFromRow(t))}adjustGroupStateFromRow(t){if(!t||!t.hasOwnProperty("group"))return;const e=t.group;let s=this.groupState[e.id];s?e.expanded=s.expanded:this.groupState[e.id]=e,e.children.forEach(t=>this.adjustGroupStateFromRow(t))}sortRows(t){return n(t,this.sort)}paginateRows(t){const e=this.currentPage*this.currentRowsPerPage-this.currentRowsPerPage;return t.slice(e,e+this.currentRowsPerPage)}getSortIcon(t){for(let e of this.sort)if(e.column===t)return"A"===e.sortMode?"mdi-sort-ascending":"mdi-sort-descending";return"mdi-sort"}calculateColspan(){let t=this.getVisibleColumns().length;return this.multiSelection&&(t+=1),this.isGrouping()&&this.hasTotals()&&(t+=1),this.hasRowActions()&&(t+=1),t}isGroupExpanded({group:t}){return!!t&&!!this.groupState[t.id]&&this.groupState[t.id].expanded}renderHeader(){const e=this.columnsWidth.length>0,s=this.getVisibleColumns().map(s=>{let i=null;if(this.showFilters){let e="";this.filters&&this.filters[s.name]&&(e=this.filters[s.name]),i=t("div",{onMouseEnter:()=>this.onColumnMouseLeave(s.name),onMouseLeave:()=>this.onColumnMouseEnter(s.name)},t("kup-text-input",{class:"datatable-filter",initialValue:e,"data-col":s.name,onKetchupTextInputUpdated:t=>{this.onFilterChange(t,s.name)}}))}let a=null;this.sortEnabled&&(a=t("span",{class:"column-sort",onMouseEnter:()=>this.onColumnMouseLeave(s.name),onMouseLeave:()=>this.onColumnMouseEnter(s.name)},t("span",{role:"button","aria-label":"Sort column",class:"mdi "+this.getSortIcon(s.name),onClick:t=>this.onColumnSort(t,s.name)})));let r=null;if(e)for(let t=0;t<this.columnsWidth.length;t++){const e=this.columnsWidth[t];if(e.column===s.name){const t=e.width.toString()+"px";r={width:t,minWidth:t,maxWidth:t};break}}const o=[],n=this.getGroupByName(s.name),l=null!=n?"Disattiva raggruppamento":"Attiva raggruppamento";o.push(t("li",{role:"menuitem",onClick:()=>this.switchColumnGroup(n,s.name)},t("span",{class:"mdi mdi-book"}),l)),o.push(t("li",{role:"menuitem",onClick:()=>this.kupAddColumn.emit({column:s.name})},t("span",{class:"mdi mdi-table-column-plus-after"}),"Aggiungi colonna"));let h=null;return 0!==o.length&&(h=t("div",{class:`column-menu ${this.openedMenu===s.name?"open":"closed"}`},t("ul",{role:"menubar"},o))),t("th",{style:r,onMouseEnter:()=>this.onColumnMouseEnter(s.name),onMouseLeave:()=>this.onColumnMouseLeave(s.name)},t("span",{class:"column-title"},s.title),a,i,h)});let i=null;this.multiSelection&&(i=t("th",{style:{width:"30px",margin:"0 auto"}},t("input",{type:"checkbox",onChange:t=>this.onSelectAll(t),title:`selectedRow: ${this.selectedRows.length} - renderedRows: ${this.renderedRows.length}`,checked:this.selectedRows.length>0&&this.selectedRows.length===this.renderedRows.length})));let a=null;this.isGrouping()&&this.hasTotals()&&(a=t("th",null));let r=null;return this.hasRowActions()&&(r=t("th",null)),[i,a,r,...s]}renderFooter(){if(!this.hasTotals())return null;const e=this.getVisibleColumns().map(({name:e})=>t("td",null,this.footer[e]));let s=null;this.multiSelection&&(s=t("td",null));let i=null;return this.isGrouping()&&this.hasTotals()&&(i=t("td",null)),t("tfoot",null,t("tr",null,s,i,e))}renderRow(e,s=0){const i=this.getVisibleColumns();if(e.group){if(0===e.group.children.length)return null;let a="mdi mdi-chevron-"+(e.group.expanded?"right":"down");const r=[];let o=[];for(let e=0;e<s;e++)o.push(t("span",{class:"indent"}));if(this.hasTotals()){const s=[];s.push(t("td",{colSpan:this.multiSelection?2:1},o,t("span",{role:"button","aria-label":"Row expander",class:a,onClick:t=>{t.stopPropagation(),this.onRowExpand(e)}}),e.group.label));for(let a of i)s.push(t("td",{class:"total"},e.group.totals[a.name]));r.push(t("tr",{class:"group",onClick:()=>this.onRowExpand(e)},s))}else r.push(t("tr",{class:"group",onClick:()=>this.onRowExpand(e)},t("td",{colSpan:this.calculateColspan()},o,t("span",{role:"button","aria-label":"Row expander",class:`row-expander ${a}`,onClick:t=>{t.stopPropagation(),this.onRowExpand(e)}}),e.group.label)));return this.isGroupExpanded(e)&&e.group.children.map(t=>this.renderRow(t,s+1)).forEach(t=>{Array.isArray(t)?t.forEach(t=>r.push(t)):r.push(t)}),r}{const a=i.map(({name:i},a)=>{let r=[];if(!(0!==a||this.isGrouping()&&this.hasTotals()))for(let e=0;e<s;e++)r.push(t("span",{class:"indent"}));const o=e.cells[i];let n=null;o.options&&(n=t("span",{class:"options",role:"button","aria-label":"Opzioni oggetto",title:"Opzioni oggetto",onClick:()=>this.onOptionClicked(i,e)},t("i",{class:"mdi mdi-settings"})));const h=this.renderCell(o,i),c={number:l(o.obj)};return t("td",{"data-column":i,style:o.style,class:c},r,h,n)});let r=null;this.multiSelection&&(r=t("td",null,t("input",{type:"checkbox",checked:this.selectedRows.includes(e),onClick:t=>t.stopPropagation(),onChange:t=>this.onRowCheckboxSelection(t,e)})));let o=null;this.isGrouping()&&this.hasTotals()&&(o=t("td",null)),this.renderedRows.push(e);let n=null;if(this.hasRowActions()){const s=this.renderActions(this.rowActions,e,"default");let i=null,a=null;e.actions?a=this.renderActions(e.actions,e,"variable"):i=t("span",{title:"Espandi voci",class:"row-action mdi mdi-chevron-right",onClick:t=>this.onRowActionExpanderClick(t,e),role:"button","aria-label":"Espandi voci","aria-pressed":"false"}),n=t("td",null,s,i,a)}const h={selected:this.selectedRows.includes(e)};return t("tr",{class:h,onClick:t=>this.onRowClick(t,e)},r,o,n,a)}}renderActions(e,s,i){return e.map((e,a)=>t("span",{title:e.text,class:`row-action ${e.icon}`,onClick:t=>this.onDefaultRowActionClick(t,{action:e,index:a,row:s,type:i}),role:"button","aria-label":e.text,"aria-pressed":"false"}))}renderCell(e,s){let i=e.value;if(h(e.obj)||c(e.obj))i=t("span",{class:e.value});else if(u(e.obj))i=t("img",{src:e.value,alt:"",width:"64",height:"64"});else if(p(e.obj))i=t("a",{href:e.value,target:"_blank"},e.value);else if(d(e.obj)){const a={value:e.value};this.columnsWidth&&this.columnsWidth[s]&&(a.width=this.columnsWidth[s]),i=t("kup-graphic-cell",Object.assign({},a))}return t("span",{class:"cell-content"},i)}render(){this.renderedRows=[];let i=null;0===this.paginatedRows.length?i=t("tr",null,t("td",{colSpan:this.calculateColspan()},"Empty data")):(i=[],this.paginatedRows.map(t=>this.renderRow(t)).forEach(t=>{Array.isArray(t)?t.forEach(t=>i.push(t)):i.push(t)}));const a=this.renderHeader(),r=this.renderFooter();let o=null;this.globalFilter&&(o=t("div",{id:"globalFilter"},t("kup-text-input",{label:"Global filter",onKetchupTextInputUpdated:t=>this.onGlobalFilterChange(t)})));let n=null;e.TOP!==this.paginatorPos&&e.BOTH!==this.paginatorPos||(n=t("kup-paginator",{id:"top-paginator",max:this.rows.length,perPage:this.rowsPerPage,selectedPerPage:this.currentRowsPerPage,currentPage:this.currentPage,onKupPageChanged:t=>this.handlePageChanged(t),onKupRowsPerPageChanged:t=>this.handleRowsPerPageChanged(t)}));let l=null;e.BOTTOM!==this.paginatorPos&&e.BOTH!==this.paginatorPos||(l=t("kup-paginator",{id:"bottom-paginator",max:this.rows.length,perPage:this.rowsPerPage,selectedPerPage:this.currentRowsPerPage,currentPage:this.currentPage,onKupPageChanged:t=>this.handlePageChanged(t),onKupRowsPerPageChanged:t=>this.handleRowsPerPageChanged(t)}));let h=null;if(this.isGrouping()){const e=this.groups.map(e=>{const s=this.getColumnByName(e.column);return s?t("div",{class:"group-chip",tabIndex:0,onClick:()=>this.removeGroup(e)},t("span",{class:"mdi mdi-close-circle"}),s.title):null});h=t("div",{id:"group-chips"},e)}const c=t("div",{id:"density-panel"},t("kup-button",{class:{active:"small"===this.density},iconClass:"mdi mdi-format-align-justify",onClick:()=>this.density="small"}),t("kup-button",{class:{active:"medium"===this.density},iconClass:"mdi mdi-menu",onClick:()=>this.density="medium"}),t("kup-button",{class:{active:"big"===this.density},iconClass:"mdi mdi-view-sequential",onClick:()=>this.density="big"})),u={"column-separation":s.COMPLETE===this.showGrid||s.COL===this.showGrid,"row-separation":s.COMPLETE===this.showGrid||s.ROW===this.showGrid};return u[`density-${this.density}`]=!0,t("div",{id:"data-table-wrapper"},t("div",{class:"above-wrapper"},n,o,c),t("div",{class:"below-wrapper"},h,t("table",{class:u},t("thead",{hidden:!this.showHeader},t("tr",null,a)),t("tbody",null,i),r)),l)}static get is(){return"kup-data-table"}static get encapsulation(){return"shadow"}static get properties(){return{columnsWidth:{type:"Any",attr:"columns-width"},currentPage:{state:!0,watchCallbacks:["recalculateRows"]},currentRowsPerPage:{state:!0,watchCallbacks:["recalculateRows"]},data:{type:"Any",attr:"data",watchCallbacks:["recalculateRows"]},density:{state:!0},expandGroups:{type:Boolean,attr:"expand-groups",watchCallbacks:["expandGroupsHandler"]},filters:{type:"Any",attr:"filters",mutable:!0,watchCallbacks:["recalculateRows"]},globalFilter:{type:Boolean,attr:"global-filter"},globalFilterValue:{state:!0,watchCallbacks:["recalculateRows"]},groups:{type:"Any",attr:"groups",mutable:!0,watchCallbacks:["recalculateRows"]},groupState:{state:!0},multiSelection:{type:Boolean,attr:"multi-selection"},openedMenu:{state:!0},paginatorPos:{type:String,attr:"paginator-pos"},rowActions:{type:"Any",attr:"row-actions"},rowsPerPage:{type:Number,attr:"rows-per-page",watchCallbacks:["rowsPerPageHandler","recalculateRows"]},selectedRows:{state:!0},selectRow:{type:Number,attr:"select-row"},showFilters:{type:Boolean,attr:"show-filters"},showGrid:{type:String,attr:"show-grid"},showHeader:{type:Boolean,attr:"show-header"},sort:{type:"Any",attr:"sort",mutable:!0,watchCallbacks:["recalculateRows"]},sortEnabled:{type:Boolean,attr:"sort-enabled"},totals:{type:"Any",attr:"totals",watchCallbacks:["recalculateRows"]}}}static get events(){return[{name:"kupAutoRowSelect",method:"kupAutoRowSelect",bubbles:!0,cancelable:!1,composed:!0},{name:"kupRowSelected",method:"kupRowSelected",bubbles:!0,cancelable:!1,composed:!0},{name:"kupOptionClicked",method:"kupOptionClicked",bubbles:!0,cancelable:!1,composed:!0},{name:"kupAddColumn",method:"kupAddColumn",bubbles:!0,cancelable:!1,composed:!0},{name:"kupRowActionClicked",method:"kupRowActionClicked",bubbles:!0,cancelable:!1,composed:!0}]}static get style(){return"\@import url(https://cdn.materialdesignicons.com/3.6.95/css/materialdesignicons.min.css);:host{--int_background-color:var(--kup-data-table_background-color,#fff);--int_main-color:var(--kup-data-table_main-color,#6aaaa7);--int_text-on-main-color:var(--kup-data-table_text-on-main-color,#fff);--int_color:var(--kup-data-table_color,#545454);--int_stronger-color:var(--kup-data-table_stronger-color,#111);--int_hover-color:var(--kup-data-table_hover-color,#545454);--int_hover-background-color:var(--kup-data-table_hover-background-color,#e0e0e0);--int_border-color:var(--kup-data-table_border-color,#000);--int_head-background-color:var(--kup-data-table_head-background-color,#f5f5f5);--int_group-background-color:var(--kup-data-table_group-background-color,#f5f5f5);--int_group-border-color:var(--kup-data-table_group-border-color,#6aaaa7);--int_filter-border-color:var(--kup-data-table_filter-border-color,#dadada);--int_icons-color:var(--kup-data-table_icons-color,grey);--int_icons-hover-color:var(--kup-data-table_icons-hover-color,#a0a0a0);--int_box-shadow:var(--kup-data-table_box-shadow,0px 0px 7.5px 0px hsla(0,0%,50.2%,0.5));--int_font-size:var(--kup-data-table_font-size,1rem)}#data-table-wrapper{background-color:var(--int_background-color)}#data-table-wrapper table{color:var(--int_stronger-color);width:100%;min-width:intrinsic;min-width:-moz-max-content;min-width:-webkit-max-content;border-collapse:collapse;text-align:left;font-size:var(--int_font-size)}#data-table-wrapper table td,#data-table-wrapper table th{padding:.5rem 1rem}#data-table-wrapper table.row-separation tr{border-bottom:1px solid var(--int_border-color)}#data-table-wrapper table.column-separation td,#data-table-wrapper table.column-separation th{border-right:1px solid var(--int_border-color)}#data-table-wrapper table .column-sort{margin-left:.5rem;cursor:pointer}#data-table-wrapper table .column-sort .mdi{-webkit-transition:color .2s ease-in-out;transition:color .2s ease-in-out}#data-table-wrapper table .column-sort .mdi-sort-ascending,#data-table-wrapper table .column-sort .mdi-sort-descending{color:var(--int_main-color)}#data-table-wrapper table th kup-text-input.datatable-filter{--int_border-color:var(--int_filter-border-color)}#data-table-wrapper table th input{display:block}#data-table-wrapper table thead{background:var(--int_head-background-color);border:1px solid var(--int_border-color);border-bottom:3px solid var(--int_border-color);font-size:115%}#data-table-wrapper table thead th{position:relative}#data-table-wrapper table tbody{border:1px solid var(--int_border-color);cursor:pointer;font-size:100%}#data-table-wrapper table tbody>tr.selected>td,#data-table-wrapper table tbody>tr:hover>td{color:var(--int_hover-color);background-color:var(--int_hover-background-color)}#data-table-wrapper table tbody>tr.group{background:var(--int_group-background-color);font-weight:700;border-top:1px solid var(--int_border-color)}#data-table-wrapper table tbody>tr.group td{padding:1rem 0}#data-table-wrapper table tbody>tr.group td.total{text-align:right;padding-right:1rem}#data-table-wrapper table tbody>tr.group icon{margin-right:.5rem}#data-table-wrapper table tbody>tr>td.number{text-align:right}#data-table-wrapper table tbody>tr>td .row-expander{margin-right:.5rem}#data-table-wrapper table tbody>tr>td .indent{display:inline-block;height:1rem;width:2rem}#data-table-wrapper table tbody>tr>td .options{font-size:100%;margin-left:.5rem;color:var(--int_icons-color)}#data-table-wrapper table tbody>tr>td .options:hover{color:var(--int_icons-hover-color)}#data-table-wrapper table tbody>tr>td .row-action{margin-right:.2rem}#data-table-wrapper table tfoot{font-size:110%}#data-table-wrapper table tfoot td{text-align:right}#data-table-wrapper table.noGrid,#data-table-wrapper table.noGrid td{border:none}#data-table-wrapper table.density-small tbody>tr>td{padding-top:.2rem;padding-bottom:.2rem}#data-table-wrapper table.density-small tbody>tr.group>td{padding-top:.75rem;padding-bottom:.75rem}#data-table-wrapper table.density-big tbody>tr>td{padding-top:1rem;padding-bottom:1rem}#data-table-wrapper table.density-big tbody>tr.group>td{padding-top:1.25rem;padding-bottom:1.25rem}#globalFilter{margin-bottom:.5rem;text-align:center}#group-chips{display:-ms-flexbox;display:flex;margin-bottom:.5rem}#group-chips>.group-chip{display:-ms-flexbox;display:flex;background-color:var(--int_main-color);padding:.5rem;color:var(--int_text-on-main-color);margin-right:.5rem;cursor:pointer;-webkit-transition:opacity .2s ease-in-out;transition:opacity .2s ease-in-out}#group-chips>.group-chip icon{margin-right:.5rem}#group-chips>.group-chip:hover{opacity:.75}.column-menu{background-color:var(--int_background-color);-webkit-box-shadow:var(--int_box-shadow);box-shadow:var(--int_box-shadow);color:var(--int_color);position:absolute;z-index:100;font-weight:400;-webkit-transition:opacity .2s ease-in-out;transition:opacity .2s ease-in-out;min-width:200px;min-width:-moz-max-content;min-width:-webkit-max-content}.column-menu.closed{display:none;opacity:0}.column-menu.open{display:block;opacity:1;-webkit-animation:display-none-transition .5s both;-webkit-animation-timing-function:cubic-bezier(.67,-.81,.89,.71);animation:display-none-transition .5s both;animation-timing-function:cubic-bezier(.67,-.81,.89,.71)}.column-menu ul{list-style-type:none;margin:0;padding:0}.column-menu ul>li{padding:.8rem;font-size:1rem;-webkit-transition:color .2s ease-in-out;transition:color .2s ease-in-out}.column-menu ul>li:hover{cursor:pointer;color:var(--int_main-color)}.column-menu ul>li .mdi{margin-right:.5rem}#density-panel{text-align:center}#density-panel kup-button{--kup-button_main-color:transparent;--kup-button_opacity:0.25;--kup-button_icon-color:var(--int_main-color);--kup-button_box-shadow:none}#density-panel kup-button:hover{--kup-button_opacity:0.75}#density-panel kup-button.active{--kup-button_opacity:1}\@-webkit-keyframes display-none-transition{0%{opacity:0}}\@keyframes display-none-transition{0%{opacity:0}}"}}function w(t){const e=t.indexOf("R"),s=t.indexOf("G"),i=t.indexOf("B");if(e<0||s<0||i<0)return;const a=t.substring(e+1,e+4),r=t.substring(s+1,s+4),o=t.substring(i+1,i+4);try{return new b(parseInt(a),parseInt(r),parseInt(o))}catch(t){console.error(t)}return null}class m{constructor(){this.width=100,this.height=100,this.color=null,this.shape="bar"}init(t){t.forEach(t=>{t.toUpperCase().startsWith("HEIGHT;")?this.initHeight(t):t.toUpperCase().startsWith("SHAPE;")?this.initShape(t):t.toUpperCase().startsWith("BCOLOR;")||this.initColor(t)})}initColor(t){if(t.length>11&&this.isValidColor(t)){this.color=w(t.substring(0,12));try{this.width=parseFloat(t.substring(13).replace(",","."))}catch(t){console.error(t)}}else if(t.startsWith("*NONE"))try{this.width=parseFloat(t.substring(6).replace(",","."))}catch(t){console.error(t)}}isTrasparent(){return null===this.color}initHeight(t){if(t){const e=t.substring("HEIGHT;".length).replace(",",".");try{this.height=parseFloat(e)}catch(t){console.error(t)}}}initShape(t){const e=(t=t.substring("SHAPE;".length)).indexOf(";");let s=t;if(e>-1){s=t.substring(0,e);try{this.width=parseFloat(t.substring(e+1).replace(",","."))}catch(t){console.error(t)}}switch(s.toLocaleLowerCase()){case"circle":this.shape="circle";break;case"tril":this.shape="tril";break;case"trir":this.shape="trir"}}isValidColor(t){if(!t)return!1;const e=[];let s=!1,i=null,a=(t=t.trim()).indexOf("R");if(a>-1&&(i=t.substring(a+1,a+4),e[0]=parseInt(i),isNaN(e[0])&&(s=!0)),(a=t.indexOf("G"))>-1&&(i=t.substring(a+1,a+4),e[1]=parseInt(i),isNaN(e[1])&&(s=!0)),(a=t.indexOf("B"))>-1&&(i=t.substring(a+1,a+4),e[2]=parseInt(i),isNaN(e[2])&&(s=!0)),s){const a=t.indexOf("R"),r=t.indexOf("G"),o=t.indexOf("B");if(i=t.substring(a+1,r),e[0]=parseInt(i),isNaN(e[0])&&(s=!0),i=t.substring(r+1,o),e[1]=parseInt(i),isNaN(e[1])&&(s=!0),i=t.substring(o+1),e[2]=parseInt(i),isNaN(e[2])&&(s=!0),s)return!1}return!(e[0]<0||e[0]>255||e[1]<0||e[1]>255||e[2]<0||e[2]>255)}getHeight(){return this.height}getWidth(){return this.width}getShape(){return this.shape}getColor(){return this.color}}class b{constructor(t,e,s){this.r=t,this.g=e,this.b=s}toString(){return`rgb(${this.r},${this.g},${this.b})`}}class P{constructor(){this.height=30,this.width=300,this.graphic_element_marker_splitter="\\\\",this.graphic_element_splitter="\\\\AND\\\\",this.background_color="BCOLOR;R255G000B000",this.default_color=new b(0,0,0)}onValueChange(){this.draw()}componentDidLoad(){this.draw()}draw(){this.value&&this.canvas.getContext&&(this.ctx=this.canvas.getContext("2d"),this.drawGraphicCell())}drawGraphicCell(){this.value.split(this.graphic_element_splitter).forEach((t,e)=>{let s="SHAPE;BAR",i=this.background_color,a="HEIGHT;100";const r=t.split(this.graphic_element_marker_splitter),o=[],n=[];r.forEach(t=>{this.isShapeMarker(t)?s=t:this.isBgColorMarker(t)?i=t:this.isHeightMarker(t)?a=t:this.isDecoratorMarker(t)?n.push(t):o.push(t)});const l=o.map(t=>{const e=new m;return e.init([s,i,a,t]),e});if(0===e&&i!==this.background_color){const t=w(i.substring("BCOLOR;".length));this.drawRect(0,0,this.canvas.width,this.canvas.height,t)}let h=0;l.forEach(t=>{switch(t.getShape()){case"circle":h=this.getNewStarXFromCircle(h,t);break;case"tril":h=this.getNewStarXFromTril(h,t);break;case"trir":h=this.getNewStarXFromTrir(h,t);break;default:h=this.getNewStarXFromBar(h,t)}}),n.forEach(t=>{t.startsWith("SEP")||t.startsWith("DIV")?this.drawSeparator(t):t.startsWith("ARW")?this.drawArrow(t):t.startsWith("GRID")&&this.drawGrid(t)})})}isShapeMarker(t){return t&&t.toUpperCase().startsWith("SHAPE;")}isBgColorMarker(t){return t&&t.toUpperCase().startsWith("BCOLOR;")}isHeightMarker(t){return t&&t.toUpperCase().startsWith("HEIGHT;")}isDecoratorMarker(t){return t&&(t.toUpperCase().startsWith("SEP;")||t.toUpperCase().startsWith("DIV;")||t.toUpperCase().startsWith("ARW;")||t.toUpperCase().startsWith("GRID;"))}getDim(t,e){return Math.floor(t/100*e)}getNewStarXFromBar(t,e){const s=this.getDim(this.canvas.width,e.getWidth()),i=this.getDim(this.canvas.height,e.getHeight()),a=this.canvas.height-i;return e.isTrasparent()||this.drawRect(t,a,s,i,e.getColor()),s}getNewStarXFromCircle(t,e){const s=this.getDim(this.canvas.width,e.getWidth()),i=(t+s)/2;return e.isTrasparent()||this.drawArc(i,this.canvas.height/2,e.getColor()),s}getNewStarXFromTril(t,e){const s=this.getDim(this.canvas.width,e.getWidth());return e.isTrasparent()||this.drawTri(s,0,t,this.canvas.height/2,e.getColor()),s}getNewStarXFromTrir(t,e){const s=this.getDim(this.canvas.width,e.getWidth());return e.isTrasparent()||this.drawTri(t,0,s,this.canvas.height/2,e.getColor()),s}drawArc(t,e,s){this.ctx.fillStyle=s.toString(),this.ctx.beginPath(),this.ctx.arc(t,e,e,0,2*Math.PI,!0),this.ctx.fill()}drawRect(t,e,s,i,a){this.ctx.fillStyle=a.toString(),this.ctx.fillRect(t,e,s,i)}drawTri(t,e,s,i,a){this.ctx.fillStyle=a.toString(),this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(s,i),this.ctx.lineTo(t,this.canvas.height),this.ctx.fill()}drawArrow(t){let e=t.substring("ARW;".length);e.indexOf(",")>-1&&(e=e.replace(",",".")),this.ctx.fillStyle=this.default_color.toString();const s=this.getDim(this.canvas.width,parseFloat(e)),i=this.canvas.height,a=Math.floor(i/3),r=a/2;this.ctx.beginPath(),this.ctx.moveTo(s,0),this.ctx.lineTo(s-a,i/2),this.ctx.lineTo(s-r,i/2),this.ctx.lineTo(s-r,i),this.ctx.lineTo(s+r,i),this.ctx.lineTo(s+r,i/2),this.ctx.lineTo(s+a,i/2),this.ctx.fill()}drawGrid(t){let e=t.substring("GRID;".length);e.indexOf(",")>-1&&(e=e.replace(",","."));const s=parseInt(e),i=this.canvas.width/s,a=this.canvas.height/5,r=this.canvas.height-a;for(let t=i;t<this.canvas.width;t+=i)this.drawRect(t,r,1,a,this.default_color)}drawSeparator(t){const e=t.substring("SEP;".length).split(";");let s="R000G000B000",i=2,a=e[0];e.length>1&&(s=e[1]),e.length>2&&(i=parseInt(e[2])),a.indexOf(",")>-1&&(a=a.replace(",","."));const r=this.getDim(this.canvas.width,parseFloat(a));this.drawRect(r,0,i,this.canvas.height,w(s))}render(){return t("canvas",{ref:t=>this.canvas=t,height:this.height,width:this.width},this.value)}static get is(){return"kup-graphic-cell"}static get encapsulation(){return"shadow"}static get properties(){return{height:{type:Number,attr:"height"},value:{type:String,attr:"value",watchCallbacks:["onValueChange"]},width:{type:Number,attr:"width"}}}}class R{constructor(){this.max=0,this.perPage=10,this.selectedPerPage=10,this.currentPage=1}isPrevPageDisabled(){return 1==this.currentPage}isNextPageDisabled(){return this.currentPage*this.perPage>=this.max}onPrevPage(){this.isPrevPageDisabled()||this.kupPageChanged.emit({newPage:this.currentPage-1})}onNextPage(){this.isNextPageDisabled()||this.kupPageChanged.emit({newPage:this.currentPage+1})}onGoToPage({target:t}){this.kupPageChanged.emit({newPage:parseInt(t.value)})}onRowsPerPage({target:t}){this.kupRowsPerPageChanged.emit({newRowsPerPage:parseInt(t.value)})}getGoToPageOptions(e){const s=[];s.push(t("option",{value:"1",selected:1===this.currentPage},"1"));for(let i=2;i<=e;i++)s.push(t("option",{value:i,selected:this.currentPage===i},i));return s}getRowsPerPageOptions(){const e=[];if(this.currentPage!=this.max){let s=this.perPage;if(0===s)return e;for(;s<this.max;)e.push(t("option",{value:s,selected:s===this.selectedPerPage},s)),s*=2;e.push(t("option",{value:this.max,selected:this.max===this.perPage},this.max))}else e.push(t("option",{value:this.perPage,selected:!0},this.perPage));return e}render(){let e="mdi mdi-chevron-left";this.isPrevPageDisabled()&&(e+=" disabled");let s="mdi mdi-chevron-right";this.isNextPageDisabled()&&(s+=" disabled");const i=Math.ceil(this.max/this.selectedPerPage),a=this.getGoToPageOptions(i),r=this.getRowsPerPageOptions();return t("div",{id:"paginator"},t("div",{class:"align-left"},"Pagina",t("span",{class:"prev-page"},t("icon",{className:e,onclick:()=>this.onPrevPage()})),t("select",{onChange:t=>this.onGoToPage(t)},a),t("span",{class:"next-page"},t("icon",{className:s,onclick:()=>this.onNextPage()})),"Di ",i),t("div",{class:"align-right"},t("span",{class:"nextPageGroup"},"Numero risultati: ",this.max),"Mostra",t("select",{onChange:t=>this.onRowsPerPage(t)},r),"righe per pagina"))}static get is(){return"kup-paginator"}static get encapsulation(){return"shadow"}static get properties(){return{currentPage:{type:Number,attr:"current-page"},max:{type:Number,attr:"max"},perPage:{type:Number,attr:"per-page"},selectedPerPage:{type:Number,attr:"selected-per-page"}}}static get events(){return[{name:"kupPageChanged",method:"kupPageChanged",bubbles:!0,cancelable:!1,composed:!0},{name:"kupRowsPerPageChanged",method:"kupRowsPerPageChanged",bubbles:!0,cancelable:!1,composed:!0}]}static get style(){return"\@import url(https://cdn.materialdesignicons.com/3.6.95/css/materialdesignicons.min.css);:host{--int_text-color:var(--kup-paginator_text-color,#545454);--int_font-size:var(--kup-paginator_font-size,1rem)}#paginator{color:var(--int_text-color);margin:.5rem 0;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:justify;justify-content:space-between;font-size:var(--int_font-size)}#paginator icon{cursor:pointer;opacity:1;-webkit-transition:opacity .1s ease-in-out;transition:opacity .1s ease-in-out}#paginator icon:hover:not(.disabled){opacity:.75}#paginator icon.disabled{cursor:default;opacity:.3}#paginator .nextPageGroup,#paginator select{margin:0 .5rem}#paginator .next-page,#paginator .prev-page{margin:0 .25rem}#paginator .nextPageGroup{padding-right:1.5rem}"}}export{g as KupDataTable,P as KupGraphicCell,R as KupPaginator};