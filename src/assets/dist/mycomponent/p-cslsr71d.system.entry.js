var __awaiter=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,s){function l(e){try{a(n.next(e))}catch(e){s(e)}}function r(e){try{a(n["throw"](e))}catch(e){s(e)}}function a(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(l,r)}a((n=n.apply(e,t||[])).next())})};var __generator=this&&this.__generator||function(e,t){var i={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,l;return l={next:r(0),throw:r(1),return:r(2)},typeof Symbol==="function"&&(l[Symbol.iterator]=function(){return this}),l;function r(e){return function(t){return a([e,t])}}function a(l){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,o&&(s=l[0]&2?o["return"]:l[0]?o["throw"]||((s=o["return"])&&s.call(o),0):o.next)&&!(s=s.call(o,l[1])).done)return s;if(o=0,s)l=[l[0]&2,s.value];switch(l[0]){case 0:case 1:s=l;break;case 4:i.label++;return{value:l[1],done:false};case 5:i.label++;o=l[1];l=[0];continue;case 7:l=i.ops.pop();i.trys.pop();continue;default:if(!(s=i.trys,s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){i=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){i.label=l[1];break}if(l[0]===6&&i.label<s[1]){i.label=s[1];s=l;break}if(s&&i.label<s[2]){i.label=s[2];i.ops.push(l);break}if(s[2])i.ops.pop();i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e];o=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:true}}};System.register(["./p-a690b875.system.js","./p-2877f8e8.system.js","./p-f92845e7.system.js","./p-0642d383.system.js","./p-dfabd0cd.system.js"],function(e){"use strict";var t,i,n,o,s,l,r,a,c,u,h,d,p,f;return{setters:[function(e){t=e.r;i=e.c;n=e.h},function(){},function(e){o=e.f;s=e.p;l=e.s;r=e.n;a=e.a},function(e){c=e.d;u=e.a;h=e.h;d=e.k;p=e.c},function(e){f=e.P}],execute:function(){var v=function(){function e(e){t(this,e);this.columns=1;this.sortEnabled=false;this.filterEnabled=false;this.multiSelection=false;this.showSelection=true;this.enableRowActions=false;this.pagination=false;this.pageSize=10;this.globalFilterValue="";this.collapsedSection={};this.selectedRows=[];this.currentPage=1;this.visibleColumns=[];this.rows=[];this.filteredRows=[];this.kupBoxClicked=i(this,"kupBoxClicked",6);this.kupBoxSelected=i(this,"kupBoxSelected",6);this.kupAutoBoxSelect=i(this,"kupAutoBoxSelect",6);this.kupRowActionMenuClicked=i(this,"kupRowActionMenuClicked",6);this.kupRowActionClicked=i(this,"kupRowActionClicked",6)}e.prototype.recalculateRows=function(){this.initRows()};e.prototype.onDataChanged=function(){this.initVisibleColumns();this.initRows();this.checkLayout()};e.prototype.onLayoutChanged=function(){this.checkLayout()};e.prototype.onSelectBoxChanged=function(){this.handleAutomaticBoxSelection()};e.prototype.componentWillLoad=function(){this.onDataChanged()};e.prototype.componentDidLoad=function(){this.handleAutomaticBoxSelection();document.addEventListener("click",this.clickFunction.bind(this))};e.prototype.componentDidUnload=function(){document.removeEventListener("click",this.clickFunction.bind(this))};e.prototype.loadRowActions=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){e.actions=t;this.rowActionMenuOpened=e;return[2]})})};e.prototype.getColumns=function(){return this.data&&this.data.columns?this.data.columns:[{title:"",name:"",size:0}]};e.prototype.initVisibleColumns=function(){this.visibleColumns=this.getColumns().filter(function(e){if(e.hasOwnProperty("visible")){return e.visible}return true})};e.prototype.getRows=function(){return this.data&&this.data.rows?this.data.rows:[]};e.prototype.initRows=function(){this.filteredRows=this.getRows();if(this.filterEnabled&&this.globalFilterValue){var e=this.visibleColumns;var t=e.length;var i=[];var n=0;while(t-- >0){i.push(e[n++].name)}this.filteredRows=o(this.filteredRows,null,this.globalFilterValue,i)}this.rows=this.sortRows(this.filteredRows);if(this.pagination){this.rows=s(this.rows,this.currentPage,this.pageSize)}};e.prototype.sortRows=function(e){var t=e;if(this.sortBy){var i={column:this.sortBy,sortMode:a.A};t=l(t,[i])}return t};e.prototype.checkLayout=function(){if(this.layout){this.boxLayout=this.layout;return}var e={horizontal:false,sections:[],style:{textAlign:"center"}};var t=this.visibleColumns;var i=t.length;var n=[];var o=0;while(i-- >0){n.push({column:t[o++].name})}e.content=n;this.boxLayout={sections:[e]}};e.prototype.onSortChange=function(e){this.sortBy=e.value.id;this.initRows()};e.prototype.onGlobalFilterChange=function(e){var t=e.detail;this.globalFilterValue=t.value};e.prototype.isSectionExpanded=function(e,t){if(!e.id||!t.id){return false}return this.collapsedSection[t.id]&&this.collapsedSection[t.id][e.id]};e.prototype.handleAutomaticBoxSelection=function(){if(this.selectBox&&this.selectBox>0&&this.selectBox<=this.rows.length){this.selectedRows=[];this.selectedRows.push(this.rows[this.selectBox-1]);this.kupAutoBoxSelect.emit({row:this.selectedRows[0]})}};e.prototype.checkIfElementIsActionMenuIcon=function(e){if(e.tagName&&e.parentElement){return e.tagName==="svg"&&e.parentElement.classList.contains("row-actions-toggler")}return false};e.prototype.onBoxClick=function(e,t){var i=e.target;if(!(i instanceof HTMLElement)){return}var n=i;var o=n.classList;while(!o.contains("box-object")&&!o.contains("box-section")&&!o.contains("box")){n=n.parentElement;if(n===null){break}o=n.classList}var s=null;if(o.contains("box-object")){s=n.dataset.column}this.kupBoxClicked.emit({row:t,column:s});if(this.multiSelection){this.onSelectionCheckChange(t)}else{this.selectedRows=[t]}};e.prototype.onSelectionCheckChange=function(e){var t=this.selectedRows.indexOf(e);if(t>=0){this.selectedRows.splice(t,1);this.selectedRows=this.selectedRows.slice()}else{this.selectedRows=this.selectedRows.concat([e])}this.kupBoxSelected.emit({rows:this.selectedRows})};e.prototype.toggleSectionExpand=function(e,t){if(!t.id){console.error("cannot expand / collapse a section withoun an ID");return}if(!e.id){console.error("cannot expand / collapse a section of a row without ad id");return}if(!this.collapsedSection[t.id]){this.collapsedSection[t.id]={};this.collapsedSection[t.id][e.id]=true}else{var i=this.collapsedSection[t.id];if(!i[e.id]){i[e.id]=true}else{i[e.id]=!i[e.id]}}this.collapsedSection=Object.assign({},this.collapsedSection)};e.prototype.onRowAction=function(e){if(!e){return}if(e===this.rowActionMenuOpened){this.rowActionMenuOpened=null;return}if(e.actions){this.rowActionMenuOpened=e}else{this.kupRowActionMenuClicked.emit({row:e})}};e.prototype.onRowActionClicked=function(e,t,i){this.kupRowActionClicked.emit({row:e,action:t,index:i})};e.prototype.clickFunction=function(e){try{var t=e.composedPath();for(var i=0,n=t;i<n.length;i++){var o=n[i];if(this.checkIfElementIsActionMenuIcon(o)){return}}}catch(t){if(this.checkIfElementIsActionMenuIcon(e.target)){return}}this.rowActionMenuOpened=null};e.prototype.handlePageChanged=function(e){var t=e.detail;this.currentPage=t.newPage};e.prototype.renderRow=function(e){var t=this;var i=this.visibleColumns.slice();var o=null;var s=e.layout;if(!s){s=this.boxLayout}var l=false;if(s){if(s.horizontal){l=true}var r=s.sections;var a=r.length;var c=0;if(a>0){o=[]}var u={horizontal:l};while(a-- >0){o.push(this.renderSection(r[c++],u,e,i))}}var h=this.selectedRows.includes(e);var d=null;if(this.multiSelection){d=n("div",{class:"box-selection"},n("input",{type:"checkbox",checked:h,onClick:function(e){return e.stopPropagation()},onChange:function(){return t.onSelectionCheckChange(e)}}))}var p=null;if(this.enableRowActions){var f={"row-action-menu":true,open:e===this.rowActionMenuOpened};var v=null;if(e.actions){var g=e.actions.map(function(i,o){var s="icon "+i.icon;return n("li",{tabindex:"0",onClick:function(){return t.onRowActionClicked(e,i,o)}},n("div",{class:s}),n("div",{class:"text"},i.text))});v=n("ul",null,g)}p=n("div",{class:"row-actions-wrapper"},n("div",{class:"row-actions-toggler"},n("svg",{version:"1.1",width:"24",height:"24",viewBox:"0 0 24 24",onClick:function(){return t.onRowAction(e)}},n("path",{d:"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z"})),n("div",{class:f},v)))}var w=null;if(e.badges&&e.badges.length>0){w=e.badges.map(function(e){return n("kup-badge",{text:e.text,position:e.position,icon:e.icon,class:"centered"})})}var b={box:true,selected:this.showSelection&&h,column:!l};return n("div",{class:"box-wrapper"},n("div",{class:b,onClick:function(i){return t.onBoxClick(i,e)}},d,o,w),p)};e.prototype.renderSection=function(e,t,i,o){var s=this;var l=null;if(e.sections&&e.sections.length>0){var r=e.sections;var a=r.length;var c=0;if(a>0){l=[]}while(a-- >0){l.push(this.renderSection(r[c++],e,i,o))}}else if(e.content){var u=e.content;var a=u.length;var c=0;if(a>0){l=[]}while(a-- >0){l.push(this.renderBoxObject(u[c++],i,o))}}else if(o.length>0){var h=o[0];o.splice(0,1);l=this.renderBoxObject({column:h.name},i,o)}var d=this.isSectionExpanded(i,e);var p=!!e.columns;var f={"box-section":true,open:d,column:!p&&!e.horizontal,grid:p,titled:!!e.title,"last-child":!e.sections||e.sections.length===0};var v=e.style||{};if(e.dim&&t){v.flex="0 0 "+e.dim;if(t.horizontal){v.maxWidth=e.dim}else{v.maxHeight=e.dim}}if(p){v["grid-template-columns"]="repeat("+e.columns+", 1fr)"}var g=null;if(e.collapsible){f["collapse-section"]=true;var w={content:true};var b="";if(e.title){b=e.title}else if(d){b="Collassa"}else{b="Espandi"}g=n("div",{class:f,style:v},n("div",{class:w},l),n("div",{class:"header",role:"button",onClick:function(t){t.stopPropagation();s.toggleSectionExpand(i,e)}},n("div",{class:"header-content"},n("span",null,b),n("span",{class:"mdi mdi-chevron-down"}))))}else{var m=e.title?n("h3",null,e.title):null;g=n("div",{class:f,style:v},m,l)}return g};e.prototype.renderBoxObject=function(e,t,i){var o=null;var s={};if(e.value){o=e.value}else if(e.column){var l=t.cells[e.column];if(l){var a=-1;for(var f=0;f<i.length;f++){var v=i[f];if(v.name===e.column){a=f;break}}if(a>=0){i.splice(a,1)}if(l.style){s=Object.assign({},l.style)}if(c(l.obj)){var g=null;if(l.config&&l.config.badges){g=l.config.badges}o=n("kup-image",{src:l.value,badges:g})}else if(u(l.obj)){o=n("kup-button",Object.assign({},h(l)))}else if(d(l.obj)){var w=r(l.value).value();var b=false;var m=null;var y={};if(l.config){b=!!l.config.hideLabel;if(l.config.hasOwnProperty("labelText")){m=l.config.labelText}if(l.config.foregroundColor){y["--kup-pb_foreground-color"]=l.config.foregroundColor}}o=n("div",{style:y},n("kup-progress-bar",{value:w,labelText:m,hideLabel:b}))}else if(p(l.obj)){o=n("span",{class:"icon "+l.value})}else{o=l.value}}}return n("div",{"data-column":e.column,class:"box-object",style:s},o)};e.prototype.render=function(){var e=this;var t=null;if(this.sortEnabled){var i={value:"",id:""};var o=this.visibleColumns.map(function(t){var n={value:t.title,id:t.name};if(t.name===e.sortBy){i=n}return n});var s=[{value:"",id:""}].concat(o);t=n("div",{id:"sort-panel"},n("kup-combo",{displayedField:"value",items:s,initialValue:i,onKetchupComboSelected:function(t){return e.onSortChange(t.detail)}}))}var l=null;if(this.filterEnabled){l=n("div",{id:"filter-panel"},n("kup-text-input",{placeholder:"Cerca",onKetchupTextInputUpdated:function(t){return e.onGlobalFilterChange(t)}},n("svg",{slot:"left",version:"1.1",width:"18",height:"18",viewBox:"0 0 24 24"},n("path",{d:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"}))))}var r=null;if(this.pagination){r=n("kup-paginator",{max:this.filteredRows.length,perPage:this.pageSize,currentPage:this.currentPage,onKupPageChanged:function(t){return e.handlePageChanged(t)},mode:f.SIMPLE})}var a=null;if(this.rows.length===0){a=n("p",{id:"empty-data-message"},"Empty data")}else{var c=this.rows;var u=c.length;var h=0;a=[];while(u-- >0){a.push(this.renderRow(c[h++]))}}var d={"grid-template-columns":"repeat("+this.columns+", 1fr)"};return n("div",null,t,l,r,n("div",{id:"box-container",style:d},a))};Object.defineProperty(e,"watchers",{get:function(){return{globalFilterValue:["recalculateRows"],sortBy:["recalculateRows"],pagination:["recalculateRows"],pageSize:["recalculateRows"],currentPage:["recalculateRows"],data:["onDataChanged"],layout:["onLayoutChanged"],selectBox:["onSelectBoxChanged"]}},enumerable:true,configurable:true});Object.defineProperty(e,"style",{get:function(){return"\@import url(https://cdn.materialdesignicons.com/4.5.95/css/materialdesignicons.min.css);:host{--box_color:var(--kup-box_color,#707070);--box_border-color:var(--kup-box_border-color,#d0d0d0);--box_border-radius:var(--kup-box_border-radius,3px);--box_img-border-radius:var(--kup-box_img-border-radius,4px);--box_expand-panel-color:var(--kup-box_expand-panel-color,$smeup-primary);--box_hover-box-shadow:var(--kup-box_hover-box-shadow,0px 0px 7.5px 0px hsla(0,0%,50.2%,0.5));--box_titled-section-font-size:var(--kup-box_titled-section-font-size,12px);--box_titled-section-bg-color:var(--kup-box_titled-section-bg-color,#fff);--box_titled-section-top:var(--kup-box_titled-section-top,-9px)}#box-container{display:grid;grid-gap:1rem;color:var(--box_color)}#box-container *{-webkit-box-sizing:border-box;box-sizing:border-box}#box-container .box-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}#box-container .box-wrapper .box{-ms-flex-positive:1;flex-grow:1;cursor:pointer;position:relative;border-radius:var(--box_border-radius);border:1px solid var(--box_border-color);display:-ms-flexbox;display:flex;padding:3px}#box-container .box-wrapper .box.column{-ms-flex-direction:column;flex-direction:column}#box-container .box-wrapper .box.selected,#box-container .box-wrapper .box:hover{-webkit-box-shadow:var(--box_hover-box-shadow);box-shadow:var(--box_hover-box-shadow)}#box-container .box-wrapper .box .box-section{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex:1 1 1%;flex:1 1 1%;-ms-flex-wrap:wrap;flex-wrap:wrap}#box-container .box-wrapper .box .box-section.last-child{margin:3px 4px}#box-container .box-wrapper .box .box-section.column{-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;-ms-flex-wrap:unset;flex-wrap:unset}#box-container .box-wrapper .box .box-section.column>.box-section{-ms-flex:0 0 auto;flex:0 0 auto}#box-container .box-wrapper .box .box-section.grid{display:grid}#box-container .box-wrapper .box .box-section .box-object{padding:1px 4px}#box-container .box-wrapper .box .box-section .box-object img{border-radius:var(--box_img-border-radius);height:auto}#box-container .box-wrapper .box .box-section.collapse-section .header{border-top:1px solid var(--box_border-color);color:var(--box_expand-panel-color);display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;width:100%}#box-container .box-wrapper .box .box-section.collapse-section .header .header-content{margin:.5rem;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}#box-container .box-wrapper .box .box-section.collapse-section .header .header-content .mdi{margin-left:5px}#box-container .box-wrapper .box .box-section.collapse-section .content{display:none;width:100%}#box-container .box-wrapper .box .box-section.collapse-section.open .header .header-content .mdi:before{-webkit-animation:rotate-icon .5s ease-out forwards;animation:rotate-icon .5s ease-out forwards}#box-container .box-wrapper .box .box-section.collapse-section.open .content{display:block}#box-container .box-wrapper .box .box-section.titled{border:1px solid var(--box_border-color);padding-top:5px;position:relative;margin:10px}#box-container .box-wrapper .box .box-section.titled>h3{position:absolute;margin:0;padding:0 3px;top:var(--box_titled-section-top);left:5px;font-size:var(--box_titled-section-font-size);background:var(--box_titled-section-bg-color)}#box-container .box-wrapper .box .box-selection{position:absolute;top:.5rem;right:.5rem}#box-container .box-wrapper .box kup-badge{--bdg_background-color:#f89406;--kup-badge_dimension:24px}#box-container .box-wrapper .row-actions-wrapper .row-actions-toggler{position:relative;width:24px;height:24px;margin-left:3px}#box-container .box-wrapper .row-actions-wrapper .row-actions-toggler svg{cursor:pointer;opacity:0;fill:#545454;-webkit-transition:opacity .5s ease-out;transition:opacity .5s ease-out}#box-container .box-wrapper .row-actions-wrapper .row-actions-toggler .row-action-menu{position:absolute;top:0;right:24px;display:none;border:1px solid var(--box_border-color);z-index:10;background:#fff;-webkit-box-shadow:0 0 7.5px 0 hsla(0,0%,50.2%,.5);box-shadow:0 0 7.5px 0 hsla(0,0%,50.2%,.5)}#box-container .box-wrapper .row-actions-wrapper .row-actions-toggler .row-action-menu ul{list-style-type:none;margin:0;padding:0}#box-container .box-wrapper .row-actions-wrapper .row-actions-toggler .row-action-menu ul>li{cursor:pointer;white-space:nowrap;padding:0 12px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;line-height:30px}#box-container .box-wrapper .row-actions-wrapper .row-actions-toggler .row-action-menu ul>li:not(:last-child){border-bottom:1px solid var(--box_border-color)}#box-container .box-wrapper .row-actions-wrapper .row-actions-toggler .row-action-menu ul>li .icon{margin-right:5px}#box-container .box-wrapper .row-actions-wrapper .row-actions-toggler .row-action-menu.open{display:block}#box-container .box-wrapper:hover .row-actions-wrapper .row-actions-toggler svg{opacity:1}:host(.no-shadow) #box-container .box{border:none}:host(.no-shadow) #box-container .box.selected,:host(.no-shadow) #box-container .box:hover{-webkit-box-shadow:none;box-shadow:none}#filter-panel,#sort-panel{margin-bottom:1rem}#filter-panel kup-text-input{--kup-text-input_border-color:#d0d0d0;--kup-text-input_color:#545454}#filter-panel svg{fill:grey;margin-left:3px}\@-webkit-keyframes rotate-icon{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(180deg);transform:rotate(180deg)}}\@-moz-keyframes rotate-icon{0%{transform:rotate(0deg)}to{transform:rotate(180deg)}}\@-o-keyframes rotate-icon{0%{transform:rotate(0deg)}to{transform:rotate(180deg)}}\@keyframes rotate-icon{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(180deg);transform:rotate(180deg)}}"},enumerable:true,configurable:true});return e}();e("kup_box",v)}}});