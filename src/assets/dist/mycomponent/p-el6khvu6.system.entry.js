System.register(["./p-a690b875.system.js"],function(t){"use strict";var e,r,i;return{setters:[function(t){e=t.r;r=t.h;i=t.c}],execute:function(){function a(t){var e=t.indexOf("R");var r=t.indexOf("G");var i=t.indexOf("B");if(e<0||r<0||i<0){return}var a=t.substring(e+1,e+4);var s=t.substring(r+1,r+4);var o=t.substring(i+1,i+4);try{return new n(parseInt(a),parseInt(s),parseInt(o))}catch(t){console.error(t)}return null}var s=function(){function t(){this.width=100;this.height=100;this.color=null;this.shape="bar"}t.prototype.init=function(t){var e=this;t.forEach(function(t){if(t.toUpperCase().startsWith("HEIGHT;")){e.initHeight(t)}else if(t.toUpperCase().startsWith("SHAPE;")){e.initShape(t)}else if(t.toUpperCase().startsWith("BCOLOR;"));else{e.initColor(t)}})};t.prototype.initColor=function(t){if(t.length>11&&this.isValidColor(t)){this.color=a(t.substring(0,12));try{this.width=parseFloat(t.substring(13).replace(",","."))}catch(t){console.error(t)}}else if(t.startsWith("*NONE")){try{this.width=parseFloat(t.substring(6).replace(",","."))}catch(t){console.error(t)}}};t.prototype.isTrasparent=function(){return this.color===null};t.prototype.initHeight=function(t){if(t){var e=t.substring("HEIGHT;".length).replace(",",".");try{this.height=parseFloat(e)}catch(t){console.error(t)}}};t.prototype.initShape=function(t){t=t.substring("SHAPE;".length);var e=t.indexOf(";");var r=t;if(e>-1){r=t.substring(0,e);try{this.width=parseFloat(t.substring(e+1).replace(",","."))}catch(t){console.error(t)}}switch(r.toLocaleLowerCase()){case"circle":this.shape="circle";break;case"tril":this.shape="tril";break;case"trir":this.shape="trir";break}};t.prototype.isValidColor=function(t){if(!t){return false}t=t.trim();var e=[];var r=false;var i=null;var a=t.indexOf("R");if(a>-1){i=t.substring(a+1,a+4);e[0]=parseInt(i);if(isNaN(e[0])){r=true}}a=t.indexOf("G");if(a>-1){i=t.substring(a+1,a+4);e[1]=parseInt(i);if(isNaN(e[1])){r=true}}a=t.indexOf("B");if(a>-1){i=t.substring(a+1,a+4);e[2]=parseInt(i);if(isNaN(e[2])){r=true}}if(r){var s=t.indexOf("R");var n=t.indexOf("G");var o=t.indexOf("B");i=t.substring(s+1,n);e[0]=parseInt(i);if(isNaN(e[0])){r=true}i=t.substring(n+1,o);e[1]=parseInt(i);if(isNaN(e[1])){r=true}i=t.substring(o+1);e[2]=parseInt(i);if(isNaN(e[2])){r=true}if(r){return false}}if(e[0]<0||e[0]>255||e[1]<0||e[1]>255||e[2]<0||e[2]>255){return false}return true};t.prototype.getHeight=function(){return this.height};t.prototype.getWidth=function(){return this.width};t.prototype.getShape=function(){return this.shape};t.prototype.getColor=function(){return this.color};return t}();var n=function(){function t(t,e,r){this.r=t;this.g=e;this.b=r}t.prototype.toString=function(){return"rgb("+this.r+","+this.g+","+this.b+")"};return t}();var o=function(){function t(t){e(this,t);this.height=30;this.width=300;this.graphic_element_marker_splitter="\\\\";this.graphic_element_splitter="\\\\AND\\\\";this.background_color="BCOLOR;R255G000B000";this.default_color=new n(0,0,0)}t.prototype.onValueChange=function(){this.draw()};t.prototype.componentDidLoad=function(){this.draw()};t.prototype.draw=function(){if(!this.value){return}if(this.canvas.getContext){this.ctx=this.canvas.getContext("2d");this.drawGraphicCell()}};t.prototype.drawGraphicCell=function(){var t=this;var e=this.value.split(this.graphic_element_splitter);e.forEach(function(e,r){var i="SHAPE;BAR";var n=t.background_color;var o="HEIGHT;100";var h=e.split(t.graphic_element_marker_splitter);var c=[];var p=[];h.forEach(function(e){if(t.isShapeMarker(e)){i=e}else if(t.isBgColorMarker(e)){n=e}else if(t.isHeightMarker(e)){o=e}else if(t.isDecoratorMarker(e)){p.push(e)}else{c.push(e)}});var u=c.map(function(t){var e=new s;e.init([i,n,o,t]);return e});if(r===0&&n!==t.background_color){var l=a(n.substring("BCOLOR;".length));t.drawRect(0,0,t.canvas.width,t.canvas.height,l)}var g=0;u.forEach(function(e){switch(e.getShape()){case"circle":g=t.getNewStarXFromCircle(g,e);break;case"tril":g=t.getNewStarXFromTril(g,e);break;case"trir":g=t.getNewStarXFromTrir(g,e);break;default:g=t.getNewStarXFromBar(g,e);break}});p.forEach(function(e){if(e.startsWith("SEP")||e.startsWith("DIV")){t.drawSeparator(e)}else if(e.startsWith("ARW")){t.drawArrow(e)}else if(e.startsWith("GRID")){t.drawGrid(e)}})})};t.prototype.isShapeMarker=function(t){return t&&t.toUpperCase().startsWith("SHAPE;")};t.prototype.isBgColorMarker=function(t){return t&&t.toUpperCase().startsWith("BCOLOR;")};t.prototype.isHeightMarker=function(t){return t&&t.toUpperCase().startsWith("HEIGHT;")};t.prototype.isDecoratorMarker=function(t){return t&&(t.toUpperCase().startsWith("SEP;")||t.toUpperCase().startsWith("DIV;")||t.toUpperCase().startsWith("ARW;")||t.toUpperCase().startsWith("GRID;"))};t.prototype.getDim=function(t,e){return Math.floor(t/100*e)};t.prototype.getNewStarXFromBar=function(t,e){var r=this.getDim(this.canvas.width,e.getWidth());var i=this.getDim(this.canvas.height,e.getHeight());var a=this.canvas.height-i;if(!e.isTrasparent()){this.drawRect(t,a,r,i,e.getColor())}return r};t.prototype.getNewStarXFromCircle=function(t,e){var r=this.getDim(this.canvas.width,e.getWidth());var i=(t+r)/2;if(!e.isTrasparent()){this.drawArc(i,this.canvas.height/2,e.getColor())}return r};t.prototype.getNewStarXFromTril=function(t,e){var r=this.getDim(this.canvas.width,e.getWidth());if(!e.isTrasparent()){this.drawTri(r,0,t,this.canvas.height/2,e.getColor())}return r};t.prototype.getNewStarXFromTrir=function(t,e){var r=this.getDim(this.canvas.width,e.getWidth());if(!e.isTrasparent()){this.drawTri(t,0,r,this.canvas.height/2,e.getColor())}return r};t.prototype.drawArc=function(t,e,r){this.ctx.fillStyle=r.toString();this.ctx.beginPath();this.ctx.arc(t,e,e,0,2*Math.PI,true);this.ctx.fill()};t.prototype.drawRect=function(t,e,r,i,a){this.ctx.fillStyle=a.toString();this.ctx.fillRect(t,e,r,i)};t.prototype.drawTri=function(t,e,r,i,a){this.ctx.fillStyle=a.toString();this.ctx.beginPath();this.ctx.moveTo(t,e);this.ctx.lineTo(r,i);this.ctx.lineTo(t,this.canvas.height);this.ctx.fill()};t.prototype.drawArrow=function(t){var e=t.substring("ARW;".length);if(e.indexOf(",")>-1){e=e.replace(",",".")}this.ctx.fillStyle=this.default_color.toString();var r=this.getDim(this.canvas.width,parseFloat(e));var i=this.canvas.height;var a=Math.floor(i/3);var s=a/2;this.ctx.beginPath();this.ctx.moveTo(r,0);this.ctx.lineTo(r-a,i/2);this.ctx.lineTo(r-s,i/2);this.ctx.lineTo(r-s,i);this.ctx.lineTo(r+s,i);this.ctx.lineTo(r+s,i/2);this.ctx.lineTo(r+a,i/2);this.ctx.fill()};t.prototype.drawGrid=function(t){var e=t.substring("GRID;".length);if(e.indexOf(",")>-1){e=e.replace(",",".")}var r=parseInt(e);var i=this.canvas.width/r;var a=this.canvas.height/5;var s=this.canvas.height-a;var n=1;for(var o=i;o<this.canvas.width;o=o+i){this.drawRect(o,s,n,a,this.default_color)}};t.prototype.drawSeparator=function(t){var e=t.substring("SEP;".length).split(";");var r="R000G000B000";var i=2;var s=e[0];if(e.length>1){r=e[1]}if(e.length>2){i=parseInt(e[2])}if(s.indexOf(",")>-1){s=s.replace(",",".")}var n=this.getDim(this.canvas.width,parseFloat(s));this.drawRect(n,0,i,this.canvas.height,a(r))};t.prototype.render=function(){var t=this;return r("canvas",{ref:function(e){return t.canvas=e},height:this.height,width:this.width},this.value)};Object.defineProperty(t,"watchers",{get:function(){return{value:["onValueChange"]}},enumerable:true,configurable:true});return t}();t("kup_graphic_cell",o);var h=function(){function t(t){e(this,t);this.max=0;this.perPage=10;this.selectedPerPage=10;this.currentPage=1;this.kupPageChanged=i(this,"kupPageChanged",6);this.kupRowsPerPageChanged=i(this,"kupRowsPerPageChanged",6)}t.prototype.isPrevPageDisabled=function(){return this.currentPage==1};t.prototype.isNextPageDisabled=function(){return this.currentPage*this.perPage>=this.max};t.prototype.onPrevPage=function(){if(this.isPrevPageDisabled()){return}this.kupPageChanged.emit({newPage:this.currentPage-1})};t.prototype.onNextPage=function(){if(this.isNextPageDisabled()){return}this.kupPageChanged.emit({newPage:this.currentPage+1})};t.prototype.onGoToPage=function(t){var e=t.target;this.kupPageChanged.emit({newPage:parseInt(e.value)})};t.prototype.onRowsPerPage=function(t){var e=t.target;this.kupRowsPerPageChanged.emit({newRowsPerPage:parseInt(e.value)})};t.prototype.getGoToPageOptions=function(t){var e=[];e.push(r("option",{value:"1",selected:this.currentPage===1},"1"));for(var i=2;i<=t;i++){e.push(r("option",{value:i,selected:this.currentPage===i},i))}return e};t.prototype.getRowsPerPageOptions=function(){var t=[];if(this.currentPage!=this.max){var e=this.perPage;if(e===0){return t}while(e<this.max){t.push(r("option",{value:e,selected:e===this.selectedPerPage},e));e=e*2}t.push(r("option",{value:this.max,selected:this.max===this.perPage},this.max))}else{t.push(r("option",{value:this.perPage,selected:true},this.perPage))}return t};t.prototype.render=function(){var t=this;var e="mdi mdi-chevron-left";if(this.isPrevPageDisabled()){e+=" disabled"}var i="mdi mdi-chevron-right";if(this.isNextPageDisabled()){i+=" disabled"}var a=Math.ceil(this.max/this.selectedPerPage);var s=this.getGoToPageOptions(a);var n=this.getRowsPerPageOptions();return r("div",{id:"paginator"},r("div",{class:"align-left"},"Pagina",r("span",{class:"prev-page"},r("icon",{className:e,onclick:function(){return t.onPrevPage()}})),r("select",{onChange:function(e){return t.onGoToPage(e)}},s),r("span",{class:"next-page"},r("icon",{className:i,onclick:function(){return t.onNextPage()}})),"Di ",a),r("div",{class:"align-right"},r("span",{class:"nextPageGroup"},"Numero risultati: ",this.max),r("slot",{name:"more-results"}),"Mostra",r("select",{onChange:function(e){return t.onRowsPerPage(e)}},n),"righe per pagina"))};Object.defineProperty(t,"style",{get:function(){return"\@import url(https://cdn.materialdesignicons.com/3.6.95/css/materialdesignicons.min.css);:host{--int_text-color:var(--kup-paginator_text-color,$mainTextColor);--int_font-size:var(--kup-paginator_font-size,1rem)}#paginator{color:var(--int_text-color);margin:.5rem 0;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:justify;justify-content:space-between;font-size:var(--int_font-size)}#paginator icon{cursor:pointer;opacity:1;-webkit-transition:opacity .1s ease-in-out;transition:opacity .1s ease-in-out}#paginator icon:hover:not(.disabled){opacity:.75}#paginator icon.disabled{cursor:default;opacity:.3}#paginator .nextPageGroup,#paginator select{margin:0 .5rem}#paginator .next-page,#paginator .prev-page{margin:0 .25rem}#paginator .nextPageGroup{padding-right:1.5rem}"},enumerable:true,configurable:true});return t}();t("kup_paginator",h)}}});