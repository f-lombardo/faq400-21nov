System.register(["./p-a690b875.system.js","./p-2877f8e8.system.js","./p-85ed1a88.system.js","./p-588b7ec1.system.js","./p-91de3b32.system.js"],function(t){"use strict";var e,i,r,a,o,n,s,h,l;return{setters:[function(t){e=t.r;i=t.c;r=t.h;a=t.g},function(){},function(t){o=t.g},function(t){n=t.e;s=t.f},function(t){h=t.a;l=t.f}],execute:function(){var c;(function(t){t["Area"]="Area";t["Bubble"]="Bubble";t["Cal"]="Cal";t["Candlestick"]="Candlestick";t["Combo"]="Combo";t["Geo"]="Geo";t["Hbar"]="Hbar";t["Line"]="Line";t["Ohlc"]="Ohlc";t["Pie"]="Pie";t["Sankey"]="Sankey";t["Scatter"]="Scatter";t["Unk"]="Unk";t["Vbar"]="Vbar"})(c||(c={}));var u;(function(t){t["D2"]="2D";t["D3"]="3D"})(u||(u={}));function g(t,e){for(var i=0;i<e.length;i++){var r=e[i];if(t===r.name){return r}}return null}var f=function(t,e){var i=e.series,r=e.axis;if(!t||!i){return[]}var a=[];var o=g(r,t.columns);if(o){a.push(o)}i.map(function(e){var i=g(e,t.columns);if(i){a.push(i)}});return a};var C=function(t,e,i){if(!t){return[]}var r=[];if(t.rows){t.rows.forEach(function(t){var a=t.cells;var o=[];e.forEach(function(t,e){var r=a[t.name];if(r&&r.obj){var c=i&&e>0;if(n(r.obj)){var u=h(r);o.push(u);if(c){o.push(u.toString())}}else if(s(r.obj)){var u=l(r).toDate();o.push(u);if(c){o.push(u.toString())}}else{o.push(r.obj.k);if(c){o.push(r.value)}}}});r.push(o)})}return r};var p=function(){function t(t){e(this,t);this.types=[c.Hbar];this.colors=[];this.legend=true;this.stacked=false;this.showMarks=false;this.version="45.2";this.kupChartClicked=i(this,"kupChartClicked",6)}t.prototype.componentDidLoad=function(){var t=this;if(!this.axis||!this.series){return}if(google){document.querySelectorAll('link[href^="https://www.gstatic.com/charts/'+this.version+'/css"]').forEach(function(e){return t.el.shadowRoot.appendChild(e.cloneNode())});try{this.loadGoogleChart()}catch(t){console.error(t)}}};t.prototype.componentWillUpdate=function(){if(this.gChart){this.gChart.clearChart()}};t.prototype.componentDidUpdate=function(){this.loadGoogleChart()};t.prototype.loadGoogleChart=function(){google.charts.setOnLoadCallback(this.createChart.bind(this))};t.prototype.createGoogleChart=function(){if(this.isComboChart()){return new google.visualization.ComboChart(this.chartContainer)}else if(this.types.length===1){switch(this.types[0]){case c.Area:return new google.visualization.AreaChart(this.chartContainer);case c.Bubble:return new google.visualization.BubbleChart(this.chartContainer);case c.Cal:return new google.visualization.Calendar(this.chartContainer);case c.Candlestick:return new google.visualization.CandlestickChart(this.chartContainer);case c.Geo:return new google.visualization.GeoChart(this.chartContainer);case c.Hbar:return new google.visualization.BarChart(this.chartContainer);case c.Line:return new google.visualization.LineChart(this.chartContainer);case c.Pie:return new google.visualization.PieChart(this.chartContainer);case c.Sankey:return new google.visualization.Sankey(this.chartContainer);case c.Scatter:return new google.visualization.ScatterChart(this.chartContainer);default:return new google.visualization.ColumnChart(this.chartContainer)}}};t.prototype.getMainChartType=function(){if(this.types.length>0){return this.types[0]}return c.Unk};t.prototype.isComboChart=function(){return this.types.length>1};t.prototype.createGoogleChartOptions=function(){var t={is3D:u.D3===this.asp};if(this.colors&&this.colors.length>0){t.colors=this.colors}if(this.width){t.width=this.width}if(this.height){t.height=this.height}if(!this.legend){t.legend={position:"none"}}if(this.stacked&&(c.Hbar===this.getMainChartType()||c.Vbar===this.getMainChartType())){t.isStacked=true}if(this.graphTitle){t.title=this.graphTitle;t.titleTextStyle={};if(this.graphTitleColor){t.titleTextStyle.color=this.graphTitleColor}if(this.graphTitleSize){t.titleTextStyle.fontSize=this.graphTitleSize}}if(this.isComboChart()){t.series={};this.types.forEach(function(e,i){var r="bars";if(c.Line===e){r="line"}else if(c.Area===e){r="area"}t.series[i.toString()]={type:r}})}return t};t.prototype.createChart=function(){var t=f(this.data,{axis:this.axis,series:this.series});var e=C(this.data,t,this.showMarks);var i=[];for(var r=0;r<t.length;r++){var a=t[r];i.push({label:a.name});if(r>0&&this.showMarks){i.push({type:"string",role:"annotation"})}}this.gChartDataTable=new google.visualization.arrayToDataTable([i].concat(e));this.gChartView=new google.visualization.DataView(this.gChartDataTable);this.gChart=this.createGoogleChart();var o=this.createGoogleChartOptions();this.gChart.draw(this.gChartView,o);google.visualization.events.addListener(this.gChart,"select",this.onChartSelect.bind(this))};t.prototype.onChartSelect=function(){var t=this.gChart.getSelection()[0];if(t){var e={};if(t.date){e.datetime=t.date;if(t.row||t.row==0){var i=this.gChartView.getTableRowIndex(t.row);e.row=this.data.rows[i]}else{return}}else{var i=t.row;var r=t.column;var a=this.gChartView.getTableRowIndex(i!=null?i:0);e.row=this.data.rows[a];if(this.series.length>1){var n=this.gChartView.getTableColumnIndex(r!=null?r:0);if("annotation"===this.gChartDataTable.getColumnProperty(n,"role")){--n}e.column=o(this.data.columns,this.series[n-1])}else{e.column=o(this.data.columns,this.series[0])}}this.kupChartClicked.emit(e)}};t.prototype.render=function(){var t=this;return r("div",{id:"chart",ref:function(e){return t.chartContainer=e}})};Object.defineProperty(t.prototype,"el",{get:function(){return a(this)},enumerable:true,configurable:true});return t}();t("kup_chart",p)}}});