var __awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,s){function l(t){try{a(n.next(t))}catch(t){s(t)}}function r(t){try{a(n["throw"](t))}catch(t){s(t)}}function a(t){t.done?o(t.value):new i(function(e){e(t.value)}).then(l,r)}a((n=n.apply(t,e||[])).next())})};var __generator=this&&this.__generator||function(t,e){var i={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,l;return l={next:r(0),throw:r(1),return:r(2)},typeof Symbol==="function"&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return a([t,e])}}function a(l){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,o&&(s=l[0]&2?o["return"]:l[0]?o["throw"]||((s=o["return"])&&s.call(o),0):o.next)&&!(s=s.call(o,l[1])).done)return s;if(o=0,s)l=[l[0]&2,s.value];switch(l[0]){case 0:case 1:s=l;break;case 4:i.label++;return{value:l[1],done:false};case 5:i.label++;o=l[1];l=[0];continue;case 7:l=i.ops.pop();i.trys.pop();continue;default:if(!(s=i.trys,s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){i=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){i.label=l[1];break}if(l[0]===6&&i.label<s[1]){i.label=s[1];s=l;break}if(s&&i.label<s[2]){i.label=s[2];i.ops.push(l);break}if(s[2])i.ops.pop();i.trys.pop();continue}l=e.call(t,i)}catch(t){l=[6,t];o=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:true}}};System.register(["./p-a690b875.system.js","./p-2877f8e8.system.js","./p-61a18256.system.js"],function(t){"use strict";var e,i,n,o,s,l,r,a,c,u,h;return{setters:[function(t){e=t.r;i=t.c;n=t.h},function(){},function(t){o=t.f;s=t.s;l=t.d;r=t.j;a=t.k;c=t.r;u=t.o;h=t.a}],execute:function(){var d=function(){function t(t){e(this,t);this.columns=1;this.sortEnabled=false;this.filterEnabled=false;this.multiSelection=false;this.showSelection=true;this.enableRowActions=false;this.globalFilterValue="";this.collapsedSection={};this.selectedRows=[];this.visibleColumns=[];this.rows=[];this.kupBoxClicked=i(this,"kupBoxClicked",6);this.kupBoxSelected=i(this,"kupBoxSelected",6);this.kupAutoBoxSelect=i(this,"kupAutoBoxSelect",6);this.kupRowActionMenuClicked=i(this,"kupRowActionMenuClicked",6);this.kupRowActionClicked=i(this,"kupRowActionClicked",6)}t.prototype.recalculateRows=function(){this.initRows()};t.prototype.onDataChanged=function(){this.initVisibleColumns();this.initRows();this.checkLayout()};t.prototype.onLayoutChanged=function(){this.checkLayout()};t.prototype.onSelectBoxChanged=function(){this.handleAutomaticBoxSelection()};t.prototype.componentWillLoad=function(){this.onDataChanged()};t.prototype.componentDidLoad=function(){this.handleAutomaticBoxSelection();document.addEventListener("click",this.clickFunction.bind(this))};t.prototype.componentDidUnload=function(){document.removeEventListener("click",this.clickFunction.bind(this))};t.prototype.loadRowActions=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){t.actions=e;this.rowActionMenuOpened=t;return[2]})})};t.prototype.getColumns=function(){return this.data&&this.data.columns?this.data.columns:[{title:"",name:"",size:0}]};t.prototype.initVisibleColumns=function(){this.visibleColumns=this.getColumns().filter(function(t){if(t.hasOwnProperty("visible")){return t.visible}return true})};t.prototype.getRows=function(){return this.data&&this.data.rows?this.data.rows:[]};t.prototype.initRows=function(){var t=this.getRows();if(this.filterEnabled&&this.globalFilterValue){var e=this.visibleColumns;var i=e.length;var n=[];var s=0;while(i-- >0){n.push(e[s++].name)}t=o(t,null,this.globalFilterValue,n)}this.rows=this.sortRows(t)};t.prototype.sortRows=function(t){var e=t;if(this.sortBy){var i={column:this.sortBy,sortMode:h.A};e=s(e,[i])}return e};t.prototype.checkLayout=function(){if(this.layout){this.boxLayout=this.layout;return}var t={horizontal:false,sections:[],style:{textAlign:"center"}};var e=this.visibleColumns;var i=e.length;var n=[];var o=0;while(i-- >0){n.push({column:e[o++].name})}t.content=n;this.boxLayout={sections:[t]}};t.prototype.onSortChange=function(t){this.sortBy=t.value.id;this.initRows()};t.prototype.onGlobalFilterChange=function(t){var e=t.detail;this.globalFilterValue=e.value};t.prototype.isSectionExpanded=function(t,e){if(!t.id||!e.id){return false}return this.collapsedSection[e.id]&&this.collapsedSection[e.id][t.id]};t.prototype.handleAutomaticBoxSelection=function(){if(this.selectBox&&this.selectBox>0&&this.selectBox<=this.rows.length){this.selectedRows=[];this.selectedRows.push(this.rows[this.selectBox-1]);this.kupAutoBoxSelect.emit({row:this.selectedRows[0]})}};t.prototype.checkIfElementIsActionMenuIcon=function(t){if(t.tagName&&t.parentElement){return t.tagName==="svg"&&t.parentElement.classList.contains("row-actions-toggler")}return false};t.prototype.onBoxClick=function(t,e){var i=t.target;if(!(i instanceof HTMLElement)){return}var n=i;var o=n.classList;while(!o.contains("box-object")&&!o.contains("box-section")&&!o.contains("box")){n=n.parentElement;if(n===null){break}o=n.classList}var s=null;if(o.contains("box-object")){s=n.dataset.column}this.kupBoxClicked.emit({row:e,column:s});if(this.multiSelection){this.onSelectionCheckChange(e)}else{this.selectedRows=[e]}};t.prototype.onSelectionCheckChange=function(t){var e=this.selectedRows.indexOf(t);if(e>=0){this.selectedRows.splice(e,1);this.selectedRows=this.selectedRows.slice()}else{this.selectedRows=this.selectedRows.concat([t])}this.kupBoxSelected.emit({rows:this.selectedRows})};t.prototype.toggleSectionExpand=function(t,e){if(!e.id){console.error("cannot expand / collapse a section withoun an ID");return}if(!t.id){console.error("cannot expand / collapse a section of a row without ad id");return}if(!this.collapsedSection[e.id]){this.collapsedSection[e.id]={};this.collapsedSection[e.id][t.id]=true}else{var i=this.collapsedSection[e.id];if(!i[t.id]){i[t.id]=true}else{i[t.id]=!i[t.id]}}this.collapsedSection=Object.assign({},this.collapsedSection)};t.prototype.onRowAction=function(t){if(!t){return}if(t===this.rowActionMenuOpened){this.rowActionMenuOpened=null;return}if(t.actions){this.rowActionMenuOpened=t}else{this.kupRowActionMenuClicked.emit({row:t})}};t.prototype.onRowActionClicked=function(t,e,i){this.kupRowActionClicked.emit({row:t,action:e,index:i})};t.prototype.clickFunction=function(t){try{var e=t.composedPath();for(var i=0,n=e;i<n.length;i++){var o=n[i];if(this.checkIfElementIsActionMenuIcon(o)){return}}}catch(e){if(this.checkIfElementIsActionMenuIcon(t.target)){return}}this.rowActionMenuOpened=null};t.prototype.renderRow=function(t){var e=this;var i=this.visibleColumns.slice();var o=null;var s=t.layout;if(!s){s=this.boxLayout}var l=false;if(s){if(s.horizontal){l=true}var r=s.sections;var a=r.length;var c=0;if(a>0){o=[]}var u={horizontal:l};while(a-- >0){o.push(this.renderSection(r[c++],u,t,i))}}var h=this.selectedRows.includes(t);var d=null;if(this.multiSelection){d=n("div",{class:"box-selection"},n("input",{type:"checkbox",checked:h,onClick:function(t){return t.stopPropagation()},onChange:function(){return e.onSelectionCheckChange(t)}}))}var p=null;if(this.enableRowActions){var f={"row-action-menu":true,open:t===this.rowActionMenuOpened};var v=null;if(t.actions){var g=t.actions.map(function(i,o){var s="icon "+i.icon;return n("li",{tabindex:"0",onClick:function(){return e.onRowActionClicked(t,i,o)}},n("div",{class:s}),n("div",{class:"text"},i.text))});v=n("ul",null,g)}p=n("div",{class:"row-actions-wrapper"},n("div",{class:"row-actions-toggler"},n("svg",{version:"1.1",width:"24",height:"24",viewBox:"0 0 24 24",onClick:function(){return e.onRowAction(t)}},n("path",{d:"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z"})),n("div",{class:f},v)))}var w=null;if(t.badges&&t.badges.length>0){w=t.badges.map(function(t){return n("kup-badge",{text:t.text,position:t.position,icon:t.icon,class:"centered"})})}var b={box:true,selected:this.showSelection&&h,column:!l};return n("div",{class:"box-wrapper"},n("div",{class:b,onClick:function(i){return e.onBoxClick(i,t)}},d,o,w),p)};t.prototype.renderSection=function(t,e,i,o){var s=this;var l=null;if(t.sections&&t.sections.length>0){var r=t.sections;var a=r.length;var c=0;if(a>0){l=[]}while(a-- >0){l.push(this.renderSection(r[c++],t,i,o))}}else if(t.content){var u=t.content;var a=u.length;var c=0;if(a>0){l=[]}while(a-- >0){l.push(this.renderBoxObject(u[c++],i,o))}}else if(o.length>0){var h=o[0];o.splice(0,1);l=this.renderBoxObject({column:h.name},i,o)}var d=this.isSectionExpanded(i,t);var p=!!t.columns;var f={"box-section":true,open:d,column:!p&&!t.horizontal,grid:p,titled:!!t.title,"last-child":!t.sections||t.sections.length===0};var v=t.style||{};if(t.dim&&e){v.flex="0 0 "+t.dim;if(e.horizontal){v.maxWidth=t.dim}else{v.maxHeight=t.dim}}if(p){v["grid-template-columns"]="repeat("+t.columns+", 1fr)"}var g=null;if(t.collapsible){f["collapse-section"]=true;var w={content:true};var b="";if(t.title){b=t.title}else if(d){b="Collassa"}else{b="Espandi"}g=n("div",{class:f,style:v},n("div",{class:w},l),n("div",{class:"header",role:"button",onClick:function(e){e.stopPropagation();s.toggleSectionExpand(i,t)}},n("div",{class:"header-content"},n("span",null,b),n("span",{class:"mdi mdi-chevron-down"}))))}else{var m=t.title?n("h3",null,t.title):null;g=n("div",{class:f,style:v},m,l)}return g};t.prototype.renderBoxObject=function(t,e,i){var o=null;var s={};if(t.value){o=t.value}else if(t.column){var h=e.cells[t.column];if(h){var d=-1;for(var p=0;p<i.length;p++){var f=i[p];if(f.name===t.column){d=p;break}}if(d>=0){i.splice(d,1)}if(h.style){s=Object.assign({},h.style)}if(l(h.obj)){var v=null;if(h.config&&h.config.badges){v=h.config.badges}o=n("kup-image",{src:h.value,badges:v})}else if(r(h.obj)){o=n("kup-button",Object.assign({},a(h)))}else if(c(h.obj)){var g=u(h.value).value();var w=false;var b=null;var m={};if(h.config){w=!!h.config.hideLabel;if(h.config.hasOwnProperty("labelText")){b=h.config.labelText}if(h.config.foregroundColor){m["--kup-pb_foreground-color"]=h.config.foregroundColor}}o=n("div",{style:m},n("kup-progress-bar",{value:g,labelText:b,hideLabel:w}))}else{o=h.value}}}return n("div",{"data-column":t.column,class:"box-object",style:s},o)};t.prototype.render=function(){var t=this;var e=null;if(this.sortEnabled){var i={value:"",id:""};var o=this.visibleColumns.map(function(e){var n={value:e.title,id:e.name};if(e.name===t.sortBy){i=n}return n});var s=[{value:"",id:""}].concat(o);e=n("div",{id:"sort-panel"},n("kup-combo",{displayedField:"value",items:s,initialValue:i,onKetchupComboSelected:function(e){return t.onSortChange(e.detail)}}))}var l=null;if(this.filterEnabled){l=n("div",{id:"filter-panel"},n("kup-text-input",{placeholder:"Cerca",onKetchupTextInputUpdated:function(e){return t.onGlobalFilterChange(e)}},n("svg",{slot:"left",version:"1.1",width:"18",height:"18",viewBox:"0 0 24 24"},n("path",{d:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"}))))}var r=null;if(this.rows.length===0){r=n("p",{id:"empty-data-message"},"Empty data")}else{var a=this.rows;var c=a.length;var u=0;r=[];while(c-- >0){r.push(this.renderRow(a[u++]))}}var h={"grid-template-columns":"repeat("+this.columns+", 1fr)"};return n("div",null,e,l,n("div",{id:"box-container",style:h},r))};Object.defineProperty(t,"watchers",{get:function(){return{globalFilterValue:["recalculateRows"],sortBy:["recalculateRows"],data:["onDataChanged"],layout:["onLayoutChanged"],selectBox:["onSelectBoxChanged"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return"\@import url(https://cdn.materialdesignicons.com/3.6.95/css/materialdesignicons.min.css);:host{--box_color:var(--kup-box_color,#707070);--box_border-color:var(--kup-box_border-color,#d0d0d0);--box_border-radius:var(--kup-box_border-radius,3px);--box_img-border-radius:var(--kup-box_img-border-radius,4px);--box_expand-panel-color:var(--kup-box_expand-panel-color,$smeup-primary);--box_hover-box-shadow:var(--kup-box_hover-box-shadow,0px 0px 7.5px 0px hsla(0,0%,50.2%,0.5));--box_titled-section-font-size:var(--kup-box_titled-section-font-size,12px);--box_titled-section-bg-color:var(--kup-box_titled-section-bg-color,#fff);--box_titled-section-top:var(--kup-box_titled-section-top,-9px)}#box-container{display:grid;grid-gap:1rem;color:var(--box_color)}#box-container *{-webkit-box-sizing:border-box;box-sizing:border-box}#box-container .box-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}#box-container .box-wrapper .box{-ms-flex-positive:1;flex-grow:1;cursor:pointer;position:relative;border-radius:var(--box_border-radius);border:1px solid var(--box_border-color);display:-ms-flexbox;display:flex;padding:3px}#box-container .box-wrapper .box.column{-ms-flex-direction:column;flex-direction:column}#box-container .box-wrapper .box.selected,#box-container .box-wrapper .box:hover{-webkit-box-shadow:var(--box_hover-box-shadow);box-shadow:var(--box_hover-box-shadow)}#box-container .box-wrapper .box .box-section{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex:1 1 1%;flex:1 1 1%;-ms-flex-wrap:wrap;flex-wrap:wrap}#box-container .box-wrapper .box .box-section.last-child{margin:3px 4px}#box-container .box-wrapper .box .box-section.column{-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;-ms-flex-wrap:unset;flex-wrap:unset}#box-container .box-wrapper .box .box-section.column>.box-section{-ms-flex:0 0 auto;flex:0 0 auto}#box-container .box-wrapper .box .box-section.grid{display:grid}#box-container .box-wrapper .box .box-section .box-object{padding:1px 4px}#box-container .box-wrapper .box .box-section .box-object img{border-radius:var(--box_img-border-radius);height:auto}#box-container .box-wrapper .box .box-section.collapse-section .header{border-top:1px solid var(--box_border-color);color:var(--box_expand-panel-color);display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;width:100%}#box-container .box-wrapper .box .box-section.collapse-section .header .header-content{margin:.5rem;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}#box-container .box-wrapper .box .box-section.collapse-section .header .header-content .mdi{margin-left:5px}#box-container .box-wrapper .box .box-section.collapse-section .content{display:none;width:100%}#box-container .box-wrapper .box .box-section.collapse-section.open .header .header-content .mdi:before{-webkit-animation:rotate-icon .5s ease-out forwards;animation:rotate-icon .5s ease-out forwards}#box-container .box-wrapper .box .box-section.collapse-section.open .content{display:block}#box-container .box-wrapper .box .box-section.titled{border:1px solid var(--box_border-color);padding-top:5px;position:relative;margin:10px}#box-container .box-wrapper .box .box-section.titled>h3{position:absolute;margin:0;padding:0 3px;top:var(--box_titled-section-top);left:5px;font-size:var(--box_titled-section-font-size);background:var(--box_titled-section-bg-color)}#box-container .box-wrapper .box .box-selection{position:absolute;top:.5rem;right:.5rem}#box-container .box-wrapper .box kup-badge{--bdg_background-color:#f89406;--kup-badge_dimension:24px}#box-container .box-wrapper .row-actions-wrapper .row-actions-toggler{position:relative;width:24px;height:24px;margin-left:3px}#box-container .box-wrapper .row-actions-wrapper .row-actions-toggler svg{cursor:pointer;opacity:0;fill:#545454;-webkit-transition:opacity .5s ease-out;transition:opacity .5s ease-out}#box-container .box-wrapper .row-actions-wrapper .row-actions-toggler .row-action-menu{position:absolute;top:0;right:24px;display:none;border:1px solid var(--box_border-color);z-index:10;background:#fff;-webkit-box-shadow:0 0 7.5px 0 hsla(0,0%,50.2%,.5);box-shadow:0 0 7.5px 0 hsla(0,0%,50.2%,.5)}#box-container .box-wrapper .row-actions-wrapper .row-actions-toggler .row-action-menu ul{list-style-type:none;margin:0;padding:0}#box-container .box-wrapper .row-actions-wrapper .row-actions-toggler .row-action-menu ul>li{cursor:pointer;white-space:nowrap;padding:0 12px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;line-height:30px}#box-container .box-wrapper .row-actions-wrapper .row-actions-toggler .row-action-menu ul>li:not(:last-child){border-bottom:1px solid var(--box_border-color)}#box-container .box-wrapper .row-actions-wrapper .row-actions-toggler .row-action-menu ul>li .icon{margin-right:5px}#box-container .box-wrapper .row-actions-wrapper .row-actions-toggler .row-action-menu.open{display:block}#box-container .box-wrapper:hover .row-actions-wrapper .row-actions-toggler svg{opacity:1}:host(.no-shadow) #box-container .box{border:none}:host(.no-shadow) #box-container .box.selected,:host(.no-shadow) #box-container .box:hover{-webkit-box-shadow:none;box-shadow:none}#filter-panel,#sort-panel{margin-bottom:1rem}#filter-panel kup-text-input{--kup-text-input_border-color:#d0d0d0;--kup-text-input_color:#545454}#filter-panel svg{fill:grey;margin-left:3px}\@-webkit-keyframes rotate-icon{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(180deg);transform:rotate(180deg)}}\@-moz-keyframes rotate-icon{0%{transform:rotate(0deg)}to{transform:rotate(180deg)}}\@-o-keyframes rotate-icon{0%{transform:rotate(0deg)}to{transform:rotate(180deg)}}\@keyframes rotate-icon{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(180deg);transform:rotate(180deg)}}"},enumerable:true,configurable:true});return t}();t("kup_box",d)}}});