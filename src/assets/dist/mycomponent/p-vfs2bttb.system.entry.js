System.register(["./p-a690b875.system.js"],function(t){"use strict";var i,e,r,a;return{setters:[function(t){i=t.r;e=t.c;r=t.h;a=t.g}],execute:function(){var o=function(){function t(t){i(this,t);this.closable=false;this.disabled=false;this.close=e(this,"close",7)}t.prototype.onCloseClicked=function(){if(!this.disabled){this.close.emit()}};t.prototype.render=function(){var t=this;var i=null;if(this.closable){i=r("svg",{version:"1.1",width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"false",onClick:function(){return t.onCloseClicked()}},r("path",{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}))}var e={disabled:this.disabled};return r("span",{id:"chip",class:e,tabindex:"0","aria-disabled":this.disabled?"true":"false"},r("span",{id:"content"},r("slot",null),i))};Object.defineProperty(t,"style",{get:function(){return":host{--chi_color:var(--kup-chip_color,#1a1a1a);--chi_icon-color:var(--kup-chip_icon-color,#d91e18);--chi_icon-color-hover:var(--kup-chip_icon-color-hover,#f0423c);--chi_background:var(--kup-chip_background,#f0f0f0);--chi_background-hover:var(--kup-chip_background-hover,#e5e5e5);--chi_disabled-color:var(--kup-chip_disabled-color,#888)}#chip{background:var(--chi_background);display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;vertical-align:middle;margin:.5rem;padding:.5rem;outline:none;cursor:default}#chip:not(.disabled):hover{background:var(--chi_background-hover)}#chip #content{margin:0 3px;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;vertical-align:middle;-ms-flex-pack:justify;justify-content:space-between;color:var(--chi_color)}#chip #content svg{cursor:pointer;fill:var(--chi_icon-color);margin-left:4px}#chip #content svg:hover{fill:var(--chi_icon-color-hover)}#chip.disabled #content{color:var(--chi_disabled-color)}#chip.disabled #content svg{cursor:default;fill:var(--chi_disabled-color)}"},enumerable:true,configurable:true});return t}();t("kup_chip",o);function s(t){var i=t.indexOf("R");var e=t.indexOf("G");var r=t.indexOf("B");if(i<0||e<0||r<0){return}var a=t.substring(i+1,i+4);var o=t.substring(e+1,e+4);var s=t.substring(r+1,r+4);try{return new h(parseInt(a),parseInt(o),parseInt(s))}catch(t){console.error(t)}return null}var n=function(){function t(){this.width=100;this.height=100;this.color=null;this.shape="bar"}t.prototype.init=function(t){var i=this;t.forEach(function(t){if(t.toUpperCase().startsWith("HEIGHT;")){i.initHeight(t)}else if(t.toUpperCase().startsWith("SHAPE;")){i.initShape(t)}else if(t.toUpperCase().startsWith("BCOLOR;"));else{i.initColor(t)}})};t.prototype.initColor=function(t){if(t.length>11&&this.isValidColor(t)){this.color=s(t.substring(0,12));try{this.width=parseFloat(t.substring(13).replace(",","."))}catch(t){console.error(t)}}else if(t.startsWith("*NONE")){try{this.width=parseFloat(t.substring(6).replace(",","."))}catch(t){console.error(t)}}};t.prototype.isTrasparent=function(){return this.color===null};t.prototype.initHeight=function(t){if(t){var i=t.substring("HEIGHT;".length).replace(",",".");try{this.height=parseFloat(i)}catch(t){console.error(t)}}};t.prototype.initShape=function(t){t=t.substring("SHAPE;".length);var i=t.indexOf(";");var e=t;if(i>-1){e=t.substring(0,i);try{this.width=parseFloat(t.substring(i+1).replace(",","."))}catch(t){console.error(t)}}switch(e.toLocaleLowerCase()){case"circle":this.shape="circle";break;case"tril":this.shape="tril";break;case"trir":this.shape="trir";break}};t.prototype.isValidColor=function(t){if(!t){return false}t=t.trim();var i=[];var e=false;var r=null;var a=t.indexOf("R");if(a>-1){r=t.substring(a+1,a+4);i[0]=parseInt(r);if(isNaN(i[0])){e=true}}a=t.indexOf("G");if(a>-1){r=t.substring(a+1,a+4);i[1]=parseInt(r);if(isNaN(i[1])){e=true}}a=t.indexOf("B");if(a>-1){r=t.substring(a+1,a+4);i[2]=parseInt(r);if(isNaN(i[2])){e=true}}if(e){var o=t.indexOf("R");var s=t.indexOf("G");var n=t.indexOf("B");r=t.substring(o+1,s);i[0]=parseInt(r);if(isNaN(i[0])){e=true}r=t.substring(s+1,n);i[1]=parseInt(r);if(isNaN(i[1])){e=true}r=t.substring(n+1);i[2]=parseInt(r);if(isNaN(i[2])){e=true}if(e){return false}}if(i[0]<0||i[0]>255||i[1]<0||i[1]>255||i[2]<0||i[2]>255){return false}return true};t.prototype.getHeight=function(){return this.height};t.prototype.getWidth=function(){return this.width};t.prototype.getShape=function(){return this.shape};t.prototype.getColor=function(){return this.color};return t}();var h=function(){function t(t,i,e){this.r=t;this.g=i;this.b=e}t.prototype.toString=function(){return"rgb("+this.r+","+this.g+","+this.b+")"};return t}();var l=function(){function t(t){i(this,t);this.height=30;this.width=300;this.graphic_element_marker_splitter="\\\\";this.graphic_element_splitter="\\\\AND\\\\";this.background_color="BCOLOR;R255G000B000";this.default_color=new h(0,0,0)}t.prototype.onValueChange=function(){this.draw()};t.prototype.componentDidLoad=function(){this.draw()};t.prototype.draw=function(){if(!this.value){return}if(this.canvas.getContext){this.ctx=this.canvas.getContext("2d");this.drawGraphicCell()}};t.prototype.drawGraphicCell=function(){var t=this;var i=this.value.split(this.graphic_element_splitter);i.forEach(function(i,e){var r="SHAPE;BAR";var a=t.background_color;var o="HEIGHT;100";var h=i.split(t.graphic_element_marker_splitter);var l=[];var u=[];h.forEach(function(i){if(t.isShapeMarker(i)){r=i}else if(t.isBgColorMarker(i)){a=i}else if(t.isHeightMarker(i)){o=i}else if(t.isDecoratorMarker(i)){u.push(i)}else{l.push(i)}});var c=l.map(function(t){var i=new n;i.init([r,a,o,t]);return i});if(e===0&&a!==t.background_color){var p=s(a.substring("BCOLOR;".length));t.drawRect(0,0,t.canvas.width,t.canvas.height,p)}var f=0;c.forEach(function(i){switch(i.getShape()){case"circle":f=t.getNewStarXFromCircle(f,i);break;case"tril":f=t.getNewStarXFromTril(f,i);break;case"trir":f=t.getNewStarXFromTrir(f,i);break;default:f=t.getNewStarXFromBar(f,i);break}});u.forEach(function(i){if(i.startsWith("SEP")||i.startsWith("DIV")){t.drawSeparator(i)}else if(i.startsWith("ARW")){t.drawArrow(i)}else if(i.startsWith("GRID")){t.drawGrid(i)}})})};t.prototype.isShapeMarker=function(t){return t&&t.toUpperCase().startsWith("SHAPE;")};t.prototype.isBgColorMarker=function(t){return t&&t.toUpperCase().startsWith("BCOLOR;")};t.prototype.isHeightMarker=function(t){return t&&t.toUpperCase().startsWith("HEIGHT;")};t.prototype.isDecoratorMarker=function(t){return t&&(t.toUpperCase().startsWith("SEP;")||t.toUpperCase().startsWith("DIV;")||t.toUpperCase().startsWith("ARW;")||t.toUpperCase().startsWith("GRID;"))};t.prototype.getDim=function(t,i){return Math.floor(t/100*i)};t.prototype.getNewStarXFromBar=function(t,i){var e=this.getDim(this.canvas.width,i.getWidth());var r=this.getDim(this.canvas.height,i.getHeight());var a=this.canvas.height-r;if(!i.isTrasparent()){this.drawRect(t,a,e,r,i.getColor())}return e};t.prototype.getNewStarXFromCircle=function(t,i){var e=this.getDim(this.canvas.width,i.getWidth());var r=(t+e)/2;if(!i.isTrasparent()){this.drawArc(r,this.canvas.height/2,i.getColor())}return e};t.prototype.getNewStarXFromTril=function(t,i){var e=this.getDim(this.canvas.width,i.getWidth());if(!i.isTrasparent()){this.drawTri(e,0,t,this.canvas.height/2,i.getColor())}return e};t.prototype.getNewStarXFromTrir=function(t,i){var e=this.getDim(this.canvas.width,i.getWidth());if(!i.isTrasparent()){this.drawTri(t,0,e,this.canvas.height/2,i.getColor())}return e};t.prototype.drawArc=function(t,i,e){this.ctx.fillStyle=e.toString();this.ctx.beginPath();this.ctx.arc(t,i,i,0,2*Math.PI,true);this.ctx.fill()};t.prototype.drawRect=function(t,i,e,r,a){this.ctx.fillStyle=a.toString();this.ctx.fillRect(t,i,e,r)};t.prototype.drawTri=function(t,i,e,r,a){this.ctx.fillStyle=a.toString();this.ctx.beginPath();this.ctx.moveTo(t,i);this.ctx.lineTo(e,r);this.ctx.lineTo(t,this.canvas.height);this.ctx.fill()};t.prototype.drawArrow=function(t){var i=t.substring("ARW;".length);if(i.indexOf(",")>-1){i=i.replace(",",".")}this.ctx.fillStyle=this.default_color.toString();var e=this.getDim(this.canvas.width,parseFloat(i));var r=this.canvas.height;var a=Math.floor(r/3);var o=a/2;this.ctx.beginPath();this.ctx.moveTo(e,0);this.ctx.lineTo(e-a,r/2);this.ctx.lineTo(e-o,r/2);this.ctx.lineTo(e-o,r);this.ctx.lineTo(e+o,r);this.ctx.lineTo(e+o,r/2);this.ctx.lineTo(e+a,r/2);this.ctx.fill()};t.prototype.drawGrid=function(t){var i=t.substring("GRID;".length);if(i.indexOf(",")>-1){i=i.replace(",",".")}var e=parseInt(i);var r=this.canvas.width/e;var a=this.canvas.height/5;var o=this.canvas.height-a;var s=1;for(var n=r;n<this.canvas.width;n=n+r){this.drawRect(n,o,s,a,this.default_color)}};t.prototype.drawSeparator=function(t){var i=t.substring("SEP;".length).split(";");var e="R000G000B000";var r=2;var a=i[0];if(i.length>1){e=i[1]}if(i.length>2){r=parseInt(i[2])}if(a.indexOf(",")>-1){a=a.replace(",",".")}var o=this.getDim(this.canvas.width,parseFloat(a));this.drawRect(o,0,r,this.canvas.height,s(e))};t.prototype.render=function(){var t=this;return r("canvas",{ref:function(i){return t.canvas=i},height:this.height,width:this.width},this.value)};Object.defineProperty(t,"watchers",{get:function(){return{value:["onValueChange"]}},enumerable:true,configurable:true});return t}();t("kup_graphic_cell",l);var u=function(){function t(t){i(this,t);this.layout="1";this.visible=false;this.tooltipPosition={};this.kupTooltipLoadData=e(this,"kupTooltipLoadData",6);this.kupTooltipLoadDetail=e(this,"kupTooltipLoadDetail",6)}t.prototype.onDataChanged=function(){var t=this;if(this.visible){this.tooltipPosition={};var i=this.wrapperEl.getBoundingClientRect();if(window.innerHeight-i.bottom<150){this.tooltipPosition.bottom=i.height+3+"px"}else{this.tooltipPosition.top=i.height+"px"}if(window.innerWidth-i.left<350){this.tooltipPosition.right="0"}else{this.tooltipPosition.left="0"}this.loadDetailTimeout=setTimeout(function(){return t.loadDetail()},200)}};t.prototype.hasDetailData=function(){return!!this.detailData&&!!this.detailData.rows};t.prototype.resetTimeouts=function(){if(this.tooltipTimeout){clearTimeout(this.tooltipTimeout);this.tooltipTimeout=null}if(this.loadDetailTimeout){clearTimeout(this.loadDetailTimeout);this.loadDetailTimeout=null}};t.prototype.loadDetail=function(){this.loadDetailTimeout=null;this.kupTooltipLoadDetail.emit()};Object.defineProperty(t.prototype,"rows",{get:function(){return this.hasDetailData()?this.detailData.rows:[]},enumerable:true,configurable:true});t.prototype.getImage=function(){if(this.data){return this.data.image}return""};t.prototype.getTitle=function(){if(this.data){return this.data.title}return""};t.prototype.getContent=function(){return this.data?this.data.content:{}};t.prototype.onMouseOver=function(){var t=this;if(!this.tooltipTimeout){this.tooltipTimeout=setTimeout(function(){t.tooltipTimeout=null;t.visible=true;t.kupTooltipLoadData.emit()},200)}};t.prototype.onMouseLeave=function(){this.data=null;this.detailData=null;this.visible=false;this.resetTimeouts()};t.prototype.getDefaultLayout=function(){return[r("div",{class:"left"},r("img",{src:this.getImage(),width:"75",height:"75"})),r("div",{class:"right"},r("h3",null,this.getTitle()),this.getInfos())]};t.prototype.getLayout2=function(){return r("div",null,r("h3",null,this.getTitle()))};t.prototype.getLayout3=function(){return[r("div",null,r("h4",null,this.getTitle())),this.getInfos()]};t.prototype.getInfos=function(){var t=null;var i=this.getContent();if(i){t=[];for(var e=1;e<=2;e++){var a=i["info"+e];if(a&&a.label&&a.label){t.push(r("div",null,r("span",{class:"label"},a.label,": ")," "+a.value))}}}return t};t.prototype.createTooltip=function(){if(!this.data){return null}var t=null;var i={};if(this.layout==="2"){t=this.getLayout2();i["layout2"]=true}else if(this.layout==="3"){t=this.getLayout3();i["layout3"]=true}else{t=this.getDefaultLayout()}var e=null;if(this.hasDetailData()){e=this.rows.map(function(t){return r("div",{class:"detail-row"},r("div",{class:"detail-row__label"},t.cells["label"].value),r("div",{class:"detail-row__value"},t.cells["value"].value))})}var a={visible:this.hasDetailData()};var o=Object.assign({},this.tooltipPosition);return r("div",{id:"tooltip",hidden:!this.visible||!this.data,style:o},r("div",{id:"main-content",class:i},t),r("div",{id:"detail",class:a},e))};t.prototype.render=function(){var t=this;return r("div",{id:"wrapper",onMouseOver:this.onMouseOver.bind(this),onMouseLeave:this.onMouseLeave.bind(this),ref:function(i){return t.wrapperEl=i}},r("slot",null),this.createTooltip())};Object.defineProperty(t.prototype,"tooltipEl",{get:function(){return a(this)},enumerable:true,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{data:["onDataChanged"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return":host{--tlt_background:var(--kup-tlt_background,#fff);--tlt_detail-lbl-color:var(--kup-detail-lbl-color,#888);--tlt_shadow:var(--kup-tlt_shadow,0px 0px 7.5px 0px hsla(0,0%,50.2%,0.5))}:host #wrapper{position:relative;display:inline-block}:host #wrapper #tooltip{position:absolute;background:var(--tlt_background);z-index:1000;-webkit-box-shadow:var(--tlt_shadow);box-shadow:var(--tlt_shadow);border-radius:3px;min-width:350px}:host #wrapper #tooltip #main-content{margin:20px;display:-ms-flexbox;display:flex}:host #wrapper #tooltip #main-content .left{width:75px;margin-right:15px}:host #wrapper #tooltip #main-content .right{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:justify;justify-content:space-between}:host #wrapper #tooltip #main-content.layout2{-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}:host #wrapper #tooltip #main-content.layout3{-ms-flex-direction:column;flex-direction:column}:host #wrapper #tooltip #main-content.layout3>div:not(:last-child){margin-bottom:6px}:host #wrapper #tooltip #main-content h3,:host #wrapper #tooltip #main-content h4{margin:0}:host #wrapper #tooltip #main-content .label{color:var(--tlt_detail-lbl-color)}:host #wrapper #tooltip #detail:not(.visible){max-height:0;opacity:0;-webkit-transition:max-height .5s ease-out,opacity .5s ease-out;transition:max-height .5s ease-out,opacity .5s ease-out}:host #wrapper #tooltip #detail.visible{border-top:1px solid #ccc;padding:20px;max-height:500px;opacity:1;-webkit-transition:max-height .5s ease-in,opacity .5s ease-in;transition:max-height .5s ease-in,opacity .5s ease-in}:host #wrapper #tooltip #detail .detail-row{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}:host #wrapper #tooltip #detail .detail-row:not(:last-child){margin-bottom:6px}:host #wrapper #tooltip #detail .detail-row__label{color:var(--tlt_detail-lbl-color)}"},enumerable:true,configurable:true});return t}();t("kup_tooltip",u)}}});